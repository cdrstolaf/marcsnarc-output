<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>JP-final-test3 - MARC Records</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; line-height: 1.6; background: #fafafa; }
        
        /* Header */
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .header h1 { margin: 0; font-size: 2em; font-weight: 300; }
        .header p { margin: 10px 0 0; opacity: 0.9; }
        
        /* Image Gallery */
        .image-gallery { display: flex; gap: 15px; overflow-x: auto; padding: 20px 0; margin-bottom: 30px; background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .thumbnail-container { flex-shrink: 0; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .thumbnail-container:hover { transform: scale(1.02); box-shadow: 0 4px 15px rgba(0,0,0,0.15); }
        .thumbnail { width: 200px; height: 300px; object-fit: cover; border-radius: 8px; border: 3px solid #e0e0e0; transition: border-color 0.2s ease; }
        .thumbnail-container:hover .thumbnail { border-color: #667eea; }
        .thumbnail-label { text-align: center; margin-top: 8px; font-size: 0.85em; color: #666; font-weight: 500; word-break: break-word; max-width: 200px; }
        .no-images { text-align: center; padding: 40px; color: #999; font-style: italic; background: white; border-radius: 10px; margin-bottom: 30px; }
        
        /* Modal */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); }
        .modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 90vw; max-height: 90vh; }
        .modal-image { max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .modal-close { position: absolute; top: 15px; right: 20px; color: white; font-size: 30px; font-weight: bold; cursor: pointer; z-index: 1001; width: 40px; height: 40px; border-radius: 50%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; transition: background 0.2s ease; }
        .modal-close:hover { background: rgba(255,0,0,0.7); }
        .modal-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; padding: 15px 20px; font-size: 18px; cursor: pointer; border-radius: 5px; transition: background 0.2s ease; }
        .modal-nav:hover { background: rgba(0,0,0,0.8); }
        .modal-prev { left: 20px; }
        .modal-next { right: 20px; }
        .modal-counter { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); color: white; background: rgba(0,0,0,0.7); padding: 8px 16px; border-radius: 20px; font-size: 14px; }
        
        /* MARC Records */
        .records-section h2 { color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; margin: 30px 0 20px; }
        .marc-record { background: white; border: none; margin-bottom: 25px; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .marc-record h3 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .confidence { background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); padding: 6px 12px; border-radius: 20px; display: inline-block; margin-bottom: 15px; color: #2c5530; font-weight: 500; font-size: 0.9em; }
        .review-flag { background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%); border: none; color: #d63031; padding: 6px 12px; border-radius: 20px; margin-bottom: 15px; font-weight: 500; font-size: 0.9em; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 5px rgba(0,0,0,0.05); }
        th, td { padding: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #f0f0f0; }
        th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-weight: 600; width: 100px; }
        .subfield-code { font-weight: bold; color: #667eea; background: #f8f9ff; padding: 2px 4px; border-radius: 3px; margin-right: 5px; }
        .no-records { text-align: center; padding: 40px; color: #999; font-style: italic; background: white; border-radius: 10px; margin-bottom: 30px; }
        
        /* External API Results */
        .api-results-section { background: white; border-radius: 10px; padding: 20px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .api-results-section h2 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .api-summary { background: #f8f9ff; border: 1px solid #e0e6ff; border-radius: 6px; padding: 12px; margin-bottom: 20px; }
        .api-summary p { margin: 0; color: #333; font-size: 0.95em; }
        .api-source { margin-bottom: 20px; }
        .api-source h3 { color: #667eea; margin-bottom: 10px; font-size: 1.1em; }
        .api-matches { background: #f8f9ff; border-radius: 8px; padding: 15px; margin-bottom: 15px; }
        .api-match { background: white; border: 1px solid #e0e0e0; border-radius: 6px; padding: 10px; margin-bottom: 10px; }
        .api-match:last-child { margin-bottom: 0; }
        .match-title { font-weight: 600; color: #333; margin-bottom: 5px; }
        .match-author { color: #666; margin-bottom: 5px; }
        .match-details { font-size: 0.9em; color: #888; }
        .no-matches { text-align: center; padding: 20px; color: #999; font-style: italic; }
        .api-no-results { }
        .search-details { background: #f8f9fa; border-radius: 6px; padding: 15px; margin-top: 15px; }
        .search-details h4 { margin-top: 0; color: #495057; }
        .search-details ul { margin: 10px 0; padding-left: 20px; }
        .search-details li { margin-bottom: 5px; color: #6c757d; }
        .search-details em { color: #6c757d; }
        .authority-result { display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 0.85em; margin-right: 10px; }
        .authority-valid { background: #d4edda; color: #155724; }
        .authority-invalid { background: #f8d7da; color: #721c24; }
        
        /* JSON Tree View */
        .json-tree-section { background: white; border-radius: 10px; padding: 20px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .json-tree-section h2 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .tree-container { border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; background: #fafafa; max-height: 600px; overflow-y: auto; font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono", monospace; }
        .expand-all-btn, .collapse-all-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 8px 16px; border-radius: 20px; cursor: pointer; margin-right: 10px; margin-bottom: 15px; font-size: 0.9em; transition: transform 0.2s ease; }
        .expand-all-btn:hover, .collapse-all-btn:hover { transform: translateY(-1px); }
        
        /* Footer */
        .footer { text-align: center; padding: 20px; color: #666; font-size: 0.9em; background: white; border-radius: 10px; margin-top: 30px; }
        .footer a { color: #667eea; text-decoration: none; font-weight: 500; }
        .footer a:hover { text-decoration: underline; }
        
        /* Responsive */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .thumbnail { width: 150px; height: 225px; }
            .thumbnail-label { max-width: 150px; }
            .modal-nav { display: none; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>JP-final-test3</h1>
        <p>üìö MARC Records generated by marcsnarc on 2025-12-23 13:26:12</p>
    </div>
    
    <div class='image-gallery'>

                <div class='thumbnail-container' onclick='openModal(0)'>
                    <img src='img_PXL_20251212_165802824.webp' alt='PXL_20251212_165802824.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165802824.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(1)'>
                    <img src='img_PXL_20251212_165807773.webp' alt='PXL_20251212_165807773.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165807773.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(2)'>
                    <img src='img_PXL_20251212_165816342.webp' alt='PXL_20251212_165816342.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165816342.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(3)'>
                    <img src='img_PXL_20251212_165825246.webp' alt='PXL_20251212_165825246.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165825246.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(4)'>
                    <img src='img_PXL_20251212_165855357.webp' alt='PXL_20251212_165855357.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165855357.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(5)'>
                    <img src='img_PXL_20251212_165928834.webp' alt='PXL_20251212_165928834.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165928834.jpg</div>
                </div>
                </div>

    
    <!-- Modal for image viewing -->
    <div id="imageModal" class="modal">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <button class="modal-nav modal-prev" onclick="changeImage(-1)">‚Äπ</button>
        <button class="modal-nav modal-next" onclick="changeImage(1)">‚Ä∫</button>
        <div class="modal-content">
            <img id="modalImage" class="modal-image" src="" alt="">
        </div>
        <div class="modal-counter" id="modalCounter"></div>
    </div>
    
    <div class="records-section">
        <h2>üìã MARC Records</h2>
        <div class='marc-record'>
<h3>Record 1</h3>
<div class='confidence'>Confidence: 0.47</div>
<div class='review-flag'>‚ö†Ô∏è Review Required</div>
<table><tr><th>LDR</th><td>00000nam a200000 Ki 500</td></tr><tr><th>001</th><td>msn20251223192611</td></tr><tr><th>003</th><td>DLC</td></tr><tr><th>005</th><td>20251223192611.0</td></tr><tr><th>008</th><td>251223m19372019            o     00jpn und d</td></tr><tr><th>040</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>DLC <span class="subfield-code">‚Ä°b</span>eng <span class="subfield-code">‚Ä°c</span>DLC <span class="subfield-code">‚Ä°e</span>rda </td></tr><tr><th>245</th><td><strong>00</strong> <span class="subfield-code">‚Ä°a</span>JP-final-test3 </td></tr><tr><th>264</th><td><strong>_1</strong> <span class="subfield-code">‚Ä°c</span>1937 </td></tr><tr><th>300</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>6 items (various formats) </td></tr><tr><th>520</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Collection consists of 2 books, 1 serials, 3 other items. Items date from 1937 to 2019. </td></tr><tr><th>500</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Collection-level record for 6 items </td></tr><tr><th>500</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Provenance: Extracted from 6 images using marcsnarc </td></tr><tr><th>561</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Extracted from 6 images using marcsnarc </td></tr><tr><th>650</th><td><strong>_0</strong> <span class="subfield-code">‚Ä°a</span>Sino-Japanese War </td></tr><tr><th>650</th><td><strong>_0</strong> <span class="subfield-code">‚Ä°a</span>Military history </td></tr><tr><th>999</th><td><strong>__</strong> <span class="subfield-code">‚Ä°i</span>Generated by marcsnarc on 2025-12-23 <span class="subfield-code">‚Ä°s</span>marcsnarc </td></tr></table></div>

    </div>
    
    <div class="api-results-section">
<h2>üåê External API Results</h2>
<div class="api-summary">
<p><strong>Search Summary:</strong> 2 item(s) searched across WorldCat, Library of Congress, and Alma catalogs</p>
</div>
<div class="api-no-results">
<div class="no-matches">External catalog searches were performed but no matches were found.</div>
<div class="search-details">
<p><strong>Search Status by Service:</strong></p>
<ul>
<li><strong>üìö WorldCat:</strong> Search attempted - likely failed due to server issues or no matches</li>
<li><strong>üèõÔ∏è Library of Congress:</strong> Authority validation performed</li>
<li><strong>üéì Alma Catalog:</strong> Local catalog searched</li>
</ul>
<p><em>Check the processing logs for detailed error messages.</em></p>
</div>
</div>
</div>

    
    
            <div class='json-tree-section'>
                <h2>üìä Analysis Data</h2>
                <div class='tree-container' id='analysis-tree'></div>
                <button class='expand-all-btn' onclick='expandAllNodes("analysis-tree")'>
                    üîç Expand All
                </button>
                <button class='collapse-all-btn' onclick='collapseAllNodes("analysis-tree")'>
                    üìÅ Collapse All
                </button>
            </div>
            
            <div class='json-tree-section'>
                <h2>üìã Processing Metadata</h2>
                <div class='tree-container' id='metadata-tree'></div>
                <button class='expand-all-btn' onclick='expandAllNodes("metadata-tree")'>
                    üîç Expand All
                </button>
                <button class='collapse-all-btn' onclick='collapseAllNodes("metadata-tree")'>
                    üìÅ Collapse All
                </button>
            </div>
            
    
    <div class="footer">
        Generated with <a href="https://github.com/anthropics/marcsnarc">marcsnarc</a> - AI-powered MARC cataloging
    </div>
    
    <script>
        // Global variables for modal and JSON data
        let currentImages = [];
        let currentImageIndex = 0;
        const analysisData = {"collection_analysis": {"item_count": 6, "formats": {"format_counts": {"periodical": 1, "pamphlet": 1, "note|ephemera": 1, "periodical|magazine": 1, "book page or bibliography": 1, "book": 1}, "unique_formats": "{'book', 'note|ephemera', 'pamphlet', 'periodical|magazine', 'periodical', 'book page or bibliography'}", "books": 2, "serials": 1, "ephemera": 0, "other": 3, "primary_format": "periodical"}, "creators": {"creator_counts": {"Osaka mai nichi Shimbun sha and Tokyo nichi nichi Shimbun sha": 1, "ÊÅ©Áî∞Ë±äÊòá": 1, "Not clearly visible": 1}, "unique_creators": "{'ÊÅ©Áî∞Ë±äÊòá', 'Osaka mai nichi Shimbun sha and Tokyo nichi nichi Shimbun sha', 'Not clearly visible'}", "items_with_creators": 3, "items_without_creators": 3, "dominant_creator": ["Osaka mai nichi Shimbun sha and Tokyo nichi nichi Shimbun sha", 1]}, "dates": {"date_range": [1937, 2019], "earliest_date": 1937, "latest_date": 2019, "date_span": 82, "items_with_dates": 3, "date_counts": {"1937": 2, "2019": 1}}, "languages": {"language_counts": {"japanese and chinese": 1, "jpn": 2, "eng": 1, "english with japanese/chinese titles": 1, "english with japanese text": 1}, "unique_languages": "{'english with japanese/chinese titles', 'jpn', 'english with japanese text', 'eng', 'japanese and chinese'}", "primary_language": "jpn", "multilingual": true}, "subjects": {"subject_counts": {"Sino-Japanese War": 2, "World War II": 1, "Military history": 2, "Propaganda": 1, "Photography": 1, "War correspondence": 1, "Manchuria": 1, "Geography": 1, "Regional studies": 1, "Japanese colonial period": 1, "North China Incident": 1, "War photography": 1, "Japanese military": 1, "1930s East Asia conflict": 1, "Japanese history": 1, "Osaka history": 1, "Chinese-Japanese relations": 1, "Japanese government": 1, "Bibliography": 1, "East Asian studies": 1, "Japanese illustrated magazines": 1, "Admiral Soemu Toyoda": 1, "Combined Fleet": 1, "Burma front": 1, "Indiai Koga": 1, "Loyang Condition": 1, "Utzigawa123": 1}, "unique_subjects": "{'Japanese illustrated magazines', 'Loyang Condition', 'War photography', 'Manchuria', 'Japanese government', 'Japanese colonial period', 'Geography', 'Admiral Soemu Toyoda', 'Osaka history', 'Indiai Koga', 'Chinese-Japanese relations', 'World War II', 'Sino-Japanese War', 'Propaganda', 'Photography', 'Japanese military', 'Military history', 'Burma front', 'East Asian studies', 'War correspondence', 'Regional studies', 'North China Incident', '1930s East Asia conflict', 'Japanese history', 'Combined Fleet', 'Utzigawa123', 'Bibliography'}", "items_with_subjects": 5, "common_subjects": [["Sino-Japanese War", 2], ["Military history", 2], ["World War II", 1], ["Propaganda", 1], ["Photography", 1]], "subject_coherence": 2.4537037037037037}, "provenance": {"collection_provenance": "Extracted from 6 images using marcsnarc", "item_provenances": {}, "consistency_score": 1.0, "has_provenance": true}, "identifiers": {"items_with_isbn": 0, "items_with_issn": 0, "items_with_oclc": 0, "items_with_lccn": 0, "identifier_coverage": 0.0}, "physical_characteristics": {"extent_variety": 5, "dimension_variety": 3, "physical_coherence": 0.33333333333333337}, "format_diversity": 6, "creator_diversity": 3, "has_books_serials": true, "shared_provenance": true, "temporal_coherence": 0.2, "workflow_type": "collection_images_to_marc", "collection_name": "JP-final-test3", "processing_timestamp": "2025-12-23T13:26:11.751253", "total_records": 1, "approach": "collection"}, "batch_analysis": {"collection_name": "JP-final-test3", "total_images": 6, "successful_analyses": 6, "failed_analyses": 0, "individual_results": [{"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165807773.jpg", "extracted_data": {"title": "The Shina Jihen Gaho [The China Incident Pictorial]", "creator": {"name": "Osaka mai nichi Shimbun sha and Tokyo nichi nichi Shimbun sha", "type": "corporate", "source": "claude_analysis", "romanization": "Osaka mainichi Shimbun sha and Tokyo nichi nichi Shimbun sha"}, "publisher": "Osaka mai nichi Shimbun sha and Tokyo nichi nichi Shimbun sha", "publication_place": "Osaka and Tokyo", "publication_date": "1937-1939", "normalized_date": {"normalized": "1937", "end_date": "1939", "circa": false, "uncertain": false, "original": "1937-1939"}, "format": "periodical", "extent": "Multiple issues", "language": "japanese and chinese", "original_script_title": "Japanese (including Chinese characters)", "other_identifiers": "Lingxel-1233 via eBay for ca. $75 per issue", "subjects": [{"heading": "Sino-Japanese War", "type": "topical", "source": "claude_analysis"}, {"heading": "World War II", "type": "topical", "source": "claude_analysis"}, {"heading": "Military history", "type": "topical", "source": "claude_analysis"}, {"heading": "Propaganda", "type": "topical", "source": "claude_analysis"}, {"heading": "Photography", "type": "topical", "source": "claude_analysis"}, {"heading": "War correspondence", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Large format box photo-illustrated magazine devoted to the war in China.", "source": "image_analysis"}, {"text": "Photo essays are full page photos found in the interior or large fold-outs.", "source": "image_analysis"}, {"text": "Articles and a daily summary of war news as well.", "source": "image_analysis"}, {"text": "Photos include many scenes of daily life in China.", "source": "image_analysis"}, {"text": "Chinese collaborators, soldiers in the field, etc.", "source": "image_analysis"}, {"text": "Inside front cover is often a map.", "source": "image_analysis"}, {"text": "Rear cover is a range advertisement.", "source": "image_analysis"}, {"text": "First three issues bear an alternate title: ÊîØÈÇ£‰∫ãÂ§âÂ§ßÊù±‰∫¨Âá∫Áâà (Hokushi Jihen Gaho) in North China", "source": "image_analysis"}, {"text": "Issues include photos of Japanese military and civilian leaders, Chinese collaborators, soldiers, war scenes, daily life in China.", "source": "image_analysis"}, {"text": "Referenced issues: August 31, no. 1 (Cover: Soldiers in the trench, using a periscope), August 30, no. 5 (Special issue of the war in Shanghai), October 21, no. 7 (Cover: a soldier climbs through a hole in a brick wall), February 11, no. 18 (Policeman directing traffic at an intersection in the snow), February 21, no. 19 (Japanese officer and Chinese child salute each other), March 11, no. 22 (Japanese bugler sounding a reveille), September 1, no. 38 (Young woman in Peking doing hand embroidery), March 5, no. 54 (Two men saw a log into planks), April 5, no. 56 (A group of army supply wagon drawn by mules cross a gold stream), April 20, no. 57 (Special issue on the Manchurian campaign), April 14, no. 62 (Special issue on commanding that a hill won of the high war and the campaign for Siyuwan)", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.765, "creator": 0.675, "publication": 0.5850000000000001, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.642}, "overall_confidence": 0.642, "claude_factors": {"text_clarity": "high", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "ÊîØÈÇ£‰∫ãËÆäÁï´Â†± Shina Jihen gaho", "language": "Chinese and Japanese", "location": "title"}, {"text": "Â§ßÈò™ÊØèÊó•Êñ∞ËÅûÁ§æ Osaka mai nichi Shimbun sha and Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ Tokyo nichi nichi Shimbun sha", "language": "Chinese characters with Japanese reading", "location": "publisher information"}, {"text": "ÊîØÈÇ£‰∫ãÂ§âÂåóÊîØÁâà Hokushi Jihen Gaho (North China edition)", "language": "Japanese", "location": "alternate title note"}], "processing_notes": ["Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 1}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165928834.jpg", "extracted_data": {"title": "Ê∫ÄÊ¥≤Âú∞Ë™å", "creator": {"name": "ÊÅ©Áî∞Ë±äÊòá", "type": "personal", "source": "claude_analysis", "romanization": "Onda Toyonori"}, "format": "pamphlet", "extent": "Single sheet or pamphlet", "language": "jpn", "original_script_title": "Japanese (kanji and kana)", "subjects": [{"heading": "Manchuria", "type": "topical", "source": "claude_analysis"}, {"heading": "Geography", "type": "topical", "source": "claude_analysis"}, {"heading": "Regional studies", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese colonial period", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Document appears to be a historical Japanese publication about Manchuria (Mansh≈´)", "source": "image_analysis"}, {"text": "Features photographic illustrations showing landscapes and architectural scenes", "source": "image_analysis"}, {"text": "Shows signs of age with discoloration and wear", "source": "image_analysis"}, {"text": "Text is oriented vertically in traditional Japanese style (read right to left)", "source": "image_analysis"}, {"text": "Contains multiple photographs depicting what appears to be colonial-era scenes", "source": "image_analysis"}, {"text": "Document header visible at top with additional text in smaller characters", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.0, "format": 0.26, "language": 0.5850000000000001, "overall": 0.40725}, "overall_confidence": 0.40725, "claude_factors": {"text_clarity": "medium", "completeness": "low", "language_certainty": "high"}, "original_text_regions": [{"text": "Ê∫ÄÊ¥≤Âú∞Ë™å", "language": "Japanese", "location": "title"}, {"text": "Ê∫ÄÊ¥≤„ÅÆËàûË∏è„Å®Ë∑≥Ë∫ç\nÊ∫ÄÊ¥≤„ÅÆËàûË∏è„Å®ÊºîÁøí", "language": "Japanese", "location": "subtitle/description area"}, {"text": "ÊÅ©Áî∞Ë±äÊòá", "language": "Japanese", "location": "left side vertical text"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Bibliographic information appears incomplete in image", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 2}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165802824.jpg", "extracted_data": {"format": "note|ephemera", "extent": "1 note", "dimensions": "approximately 4x5 inches (estimated)", "language": "eng", "original_script_title": "Latin", "notes": [{"text": "Item is a light blue/turquoise colored note or post-it note", "source": "image_analysis"}, {"text": "Handwritten text in cursive script", "source": "image_analysis"}, {"text": "Appears to be a personal note or label, not a published bibliographic item", "source": "image_analysis"}, {"text": "Text appears to be oriented at an angle (rotated approximately 90 degrees)", "source": "image_analysis"}, {"text": "The handwritten text is difficult to read with certainty but appears to contain 'B' and possibly 'Dellman' or similar", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.45499999999999996, "creator": 0.2, "publication": 0.0, "format": 0.5850000000000001, "language": 0.5850000000000001, "overall": 0.33275}, "overall_confidence": 0.33275, "claude_factors": {"text_clarity": "medium", "completeness": "high", "language_certainty": "high"}, "original_text_regions": [{"text": "Bellman? (uncertain reading)", "language": "English", "location": "note surface"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided", "No title could be extracted from image", "No creator/author information found"], "review_required": true, "sequence_number": 3}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165855357.jpg", "extracted_data": {"title": "ÂåóÊîØ‰∫ãÂ§âÁîªÂ†±", "creator": {"name": "Not clearly visible", "type": "corporate", "source": "claude_analysis"}, "publisher": "Not clearly visible in image", "publication_place": "Japan (likely)", "publication_date": "1930s (likely 1937-1938 based on North China Incident context)", "normalized_date": {"normalized": "1937", "end_date": "1938", "circa": true, "uncertain": false, "original": "1930s (likely 1937-1938 based on North China Incident context)"}, "format": "periodical|magazine", "extent": "Single issue visible", "dimensions": "Appears to be standard magazine format, approximately A4 or similar size", "language": "jpn", "original_script_title": "Chinese characters (Kanji) with Japanese usage", "other_identifiers": "Volume and issue numbers visible on left side but not clearly legible", "subjects": [{"heading": "North China Incident", "type": "topical", "source": "claude_analysis"}, {"heading": "Sino-Japanese War", "type": "topical", "source": "claude_analysis"}, {"heading": "Military history", "type": "topical", "source": "claude_analysis"}, {"heading": "War photography", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese military", "type": "topical", "source": "claude_analysis"}, {"heading": "1930s East Asia conflict", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Title translates to 'North China Incident Pictorial' or 'North China War Illustrated'", "source": "image_analysis"}, {"text": "Cover shows soldiers with helmets in combat position looking at bamboo or vegetation", "source": "image_analysis"}, {"text": "Black and white photograph on cover", "source": "image_analysis"}, {"text": "Historical wartime publication", "source": "image_analysis"}, {"text": "Paper shows age-related discoloration", "source": "image_analysis"}, {"text": "Small text below title banner appears to contain publication information but is not clearly legible", "source": "image_analysis"}, {"text": "Vertical text on left side appears to contain volume/issue information", "source": "image_analysis"}, {"text": "Small numbering visible in corners (possibly page or issue numbers)", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.45499999999999996, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.5275}, "overall_confidence": 0.5275, "claude_factors": {"text_clarity": "medium", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "ÂåóÊîØ‰∫ãÂ§âÁîªÂ†±", "language": "Japanese (using Chinese characters)", "location": "title header"}, {"text": "[Small text below title - partially legible]", "language": "Japanese", "location": "subtitle area below title banner"}, {"text": "[Vertical text on left margin]", "language": "Japanese", "location": "left margin"}], "processing_notes": ["Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 4}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165816342.jpg", "extracted_data": {"title": "Bibliography entries related to Osaka and Japanese history", "format": "book page or bibliography", "extent": "Single page", "dimensions": "Standard letter or A4 size (approximately)", "language": "english with japanese/chinese titles", "original_script_title": "Latin script with Chinese characters (Êº¢Â≠ó/kanji)", "other_identifiers": "Contains reference numbers like [1930], [1943], [1944]", "subjects": [{"heading": "Japanese history", "type": "topical", "source": "claude_analysis"}, {"heading": "Osaka history", "type": "topical", "source": "claude_analysis"}, {"heading": "Chinese-Japanese relations", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese government", "type": "topical", "source": "claude_analysis"}, {"heading": "Bibliography", "type": "topical", "source": "claude_analysis"}, {"heading": "East Asian studies", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "This appears to be a page from a bibliography or reference section", "source": "image_analysis"}, {"text": "Contains multiple bibliographic entries in English with romanized Japanese titles", "source": "image_analysis"}, {"text": "Entries include works about Osaka (Â§ßÈò™), Chinese national government, Japanese puppet regimes, and Burma", "source": "image_analysis"}, {"text": "References span publications from early 20th century (1900s-1940s)", "source": "image_analysis"}, {"text": "Mixed language entries with English descriptions and Chinese/Japanese original titles", "source": "image_analysis"}, {"text": "Entries numbered as Shows 14, Shows 15, Shows 16, etc.", "source": "image_analysis"}, {"text": "References include works published in Showa era (Êò≠Âíå)", "source": "image_analysis"}, {"text": "Multiple entries reference 'Dai Osaka shashin' (Â§ßÈò™ÂÜôÁúü) - Osaka photography/pictures", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.2, "publication": 0.0, "format": 0.5850000000000001, "language": 0.5850000000000001, "overall": 0.37475}, "overall_confidence": 0.37475, "claude_factors": {"text_clarity": "medium", "completeness": "high", "language_certainty": "high"}, "original_text_regions": [{"text": "Â§ßÈò™Â∏ÇÂΩπÊâÄÁ∑® Osaka shiriyakusho (Osaka municipal) Â§ßÈò™ÂÜôÁúüÂ∏ñ Osaka shashin cho", "language": "Japanese with Chinese characters", "location": "bibliography entries"}, {"text": "Dai Osaka shashin cho Â§ßÈò™ÂÜôÁúüÂ∏ñ", "language": "Japanese romanization and Chinese characters", "location": "bibliography entries"}, {"text": "Shows 14, August 15, no. 64. Anglo-Japanese talks in Tokyo. Cover of Hierarch-ers, no. of behind a palm tree to celebrate establishment of a new government for China.", "language": "English", "location": "bibliography entry"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided", "No creator/author information found"], "review_required": true, "sequence_number": 5}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165825246.jpg", "extracted_data": {"title": "Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æÁâàÁîªÈÉ® (T≈çky≈ç nichi nichi shimbunsha hanga-bu)", "publication_date": "2019", "normalized_date": {"normalized": "2019", "end_date": null, "circa": false, "uncertain": false, "original": "2019"}, "format": "book", "language": "english with japanese text", "original_script_title": "Latin and Japanese (kanji)", "subjects": [{"heading": "Japanese illustrated magazines", "type": "topical", "source": "claude_analysis"}, {"heading": "Admiral Soemu Toyoda", "type": "topical", "source": "claude_analysis"}, {"heading": "Combined Fleet", "type": "topical", "source": "claude_analysis"}, {"heading": "Burma front", "type": "topical", "source": "claude_analysis"}, {"heading": "Indiai Koga", "type": "topical", "source": "claude_analysis"}, {"heading": "Loyang Condition", "type": "topical", "source": "claude_analysis"}, {"heading": "Utzigawa123", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "This appears to be a colophon or publication information page", "source": "image_analysis"}, {"text": "Contains footnote markers (++++++)", "source": "image_analysis"}, {"text": "Text indicates catalog issue held 19, July 2019", "source": "image_analysis"}, {"text": "References multiple historical topics including WWII-era Japanese naval history", "source": "image_analysis"}, {"text": "Mentions East Asia and Greater East Asia", "source": "image_analysis"}, {"text": "Text describes photographs and advertisements from cover and front cover", "source": "image_analysis"}, {"text": "References Admiral Koga as commander of combined fleet", "source": "image_analysis"}, {"text": "Mentions Boganville, Death of Admiral Mineichi Koga", "source": "image_analysis"}, {"text": "Contains location reference: Utzigawa123 via Ebay in", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.2, "publication": 0.15166666666666667, "format": 0.26, "language": 0.5850000000000001, "overall": 0.35633333333333334}, "overall_confidence": 0.35633333333333334, "claude_factors": {"text_clarity": "medium", "completeness": "low", "language_certainty": "high"}, "original_text_regions": [{"text": "Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æÁâàÁîªÈÉ® T≈çky≈ç nichi nichi shimbunsha hanga-bu", "language": "Japanese and romanization", "location": "body text"}, {"text": "Total issues held: 19. Cataloged July, 2019.", "language": "English", "location": "bottom of page"}, {"text": "the early 2000s.", "language": "English", "location": "body text"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Bibliographic information appears incomplete in image", "Contains CJK characters - romanization provided", "No creator/author information found"], "review_required": true, "sequence_number": 6}], "collection_analysis": {"total_items": 6, "successful_extractions": 6, "common_characteristics": {"primary_language": "jpn", "language_distribution": {"japanese and chinese": 1, "jpn": 2, "eng": 1, "english with japanese/chinese titles": 1, "english with japanese text": 1}, "primary_format": "periodical", "format_distribution": {"periodical": 1, "pamphlet": 1, "note|ephemera": 1, "periodical|magazine": 1, "book page or bibliography": 1, "book": 1}, "publishers": {"Osaka mai nichi Shimbun sha and Tokyo nichi nichi Shimbun sha": 1, "Not clearly visible in image": 1}}, "quality_assessment": {"average_confidence": 0.4400972222222222, "high_confidence_items": 0, "low_confidence_items": 4, "confidence_range": [0.33275, 0.642]}, "recommendations": ["More than 30% of items have low confidence - consider manual review", "Multiple languages detected - verify language coding", "6 items contain CJK characters - verify romanization"]}, "batch_confidence": 0.4400972222222222, "processing_timestamp": "2025-12-23T13:26:11.545608"}, "individual_extractions": [{"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165807773.jpg", "extraction_confidence": 0.642, "extracted_fields": ["title", "creator", "publisher", "publication_place", "publication_date", "normalized_date", "format", "extent", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165928834.jpg", "extraction_confidence": 0.40725, "extracted_fields": ["title", "creator", "format", "extent", "language", "original_script_title", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165802824.jpg", "extraction_confidence": 0.33275, "extracted_fields": ["format", "extent", "dimensions", "language", "original_script_title", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165855357.jpg", "extraction_confidence": 0.5275, "extracted_fields": ["title", "creator", "publisher", "publication_place", "publication_date", "normalized_date", "format", "extent", "dimensions", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165816342.jpg", "extraction_confidence": 0.37475, "extracted_fields": ["title", "format", "extent", "dimensions", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165825246.jpg", "extraction_confidence": 0.35633333333333334, "extracted_fields": ["title", "publication_date", "normalized_date", "format", "language", "original_script_title", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}], "external_api_results": [{"worldcat": [], "loc": [], "alma": [], "best_match": null}]};
        const metadataData = {"workflow_type": "collection_images_to_marc", "collection_name": "JP-final-test3", "processing_result": {"approach": "collection", "records_generated": 1, "review_required": true, "groupings": {"approach": "collection", "total_items": 6, "groups": [{"type": "collection", "items": ["The Shina Jihen Gaho [The China Incident Pictorial]", "Ê∫ÄÊ¥≤Âú∞Ë™å", "Untitled", "ÂåóÊîØ‰∫ãÂ§âÁîªÂ†±", "Bibliography entries related to Osaka and Japanese history", "Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æÁâàÁîªÈÉ® (T≈çky≈ç nichi nichi shimbunsha hanga-bu)"], "record_type": "collection"}]}}, "collection_data": {"total_items": 6, "source_images": ["examples/Japanese Prints in OCLC/PXL_20251212_165807773.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165928834.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165802824.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165855357.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165816342.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165825246.jpg"], "provenance": "Extracted from 6 images using marcsnarc"}, "batch_analysis_summary": {"total_images": 6, "successful_analyses": 6, "batch_confidence": 0.4400972222222222}, "processing_timestamp": "2025-12-23T13:26:11.751276"};
        
        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize images array from gallery
            const thumbnails = document.querySelectorAll('.thumbnail');
            currentImages = Array.from(thumbnails).map(img => ({
                src: img.src,
                alt: img.alt
            }));
            
            // Initialize JSON trees
            if (analysisData && Object.keys(analysisData).length > 0) {
                renderJsonTree('analysis-tree', analysisData);
            }
            if (metadataData && Object.keys(metadataData).length > 0) {
                renderJsonTree('metadata-tree', metadataData);
            }
        });
        
        // Modal functions
        function openModal(index) {
            currentImageIndex = index;
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const counter = document.getElementById('modalCounter');
            
            if (currentImages[index]) {
                modalImage.src = currentImages[index].src;
                modalImage.alt = currentImages[index].alt;
                counter.textContent = `${index + 1} of ${currentImages.length}`;
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function changeImage(direction) {
            currentImageIndex = (currentImageIndex + direction + currentImages.length) % currentImages.length;
            openModal(currentImageIndex);
        }
        
        // Keyboard controls
        document.addEventListener('keydown', function(e) {
            const modal = document.getElementById('imageModal');
            if (modal.style.display === 'block') {
                if (e.key === 'Escape') closeModal();
                if (e.key === 'ArrowLeft') changeImage(-1);
                if (e.key === 'ArrowRight') changeImage(1);
            }
        });
        
        // Close modal on background click
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });
        
        // JSON Tree rendering functions
        function renderJsonTree(containerId, data) {
            const container = document.getElementById(containerId);
            if (!container || !data) return;
            
            container.innerHTML = '';
            const tree = createTreeElement(data, '', 0);
            container.appendChild(tree);
        }
        
        function createTreeElement(value, key, level) {
            const wrapper = document.createElement('div');
            wrapper.style.marginLeft = `${level * 20}px`;
            wrapper.style.marginBottom = '3px';
            
            if (value && typeof value === 'object' && !Array.isArray(value)) {
                // Object
                const keyElement = document.createElement('div');
                keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìÅ ${key} {${Object.keys(value).length}}</span>`;
                keyElement.style.userSelect = 'none';
                
                const children = document.createElement('div');
                children.style.display = 'none';
                children.style.borderLeft = '2px solid #e2e8f0';
                children.style.marginLeft = '15px';
                children.style.paddingLeft = '10px';
                
                Object.entries(value).forEach(([childKey, childValue]) => {
                    children.appendChild(createTreeElement(childValue, childKey, 0));
                });
                
                keyElement.addEventListener('click', function() {
                    const isExpanded = children.style.display !== 'none';
                    if (isExpanded) {
                        children.style.display = 'none';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìÅ ${key} {${Object.keys(value).length}}</span>`;
                    } else {
                        children.style.display = 'block';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñº üìÇ ${key} {${Object.keys(value).length}}</span>`;
                    }
                });
                
                wrapper.appendChild(keyElement);
                wrapper.appendChild(children);
            } else if (Array.isArray(value)) {
                // Array
                const keyElement = document.createElement('div');
                keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìö ${key} [${value.length}]</span>`;
                keyElement.style.userSelect = 'none';
                
                const children = document.createElement('div');
                children.style.display = 'none';
                children.style.borderLeft = '2px solid #e2e8f0';
                children.style.marginLeft = '15px';
                children.style.paddingLeft = '10px';
                
                value.forEach((item, index) => {
                    children.appendChild(createTreeElement(item, `[${index}]`, 0));
                });
                
                keyElement.addEventListener('click', function() {
                    const isExpanded = children.style.display !== 'none';
                    if (isExpanded) {
                        children.style.display = 'none';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìö ${key} [${value.length}]</span>`;
                    } else {
                        children.style.display = 'block';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñº üìñ ${key} [${value.length}]</span>`;
                    }
                });
                
                wrapper.appendChild(keyElement);
                wrapper.appendChild(children);
            } else {
                // Primitive value
                const element = document.createElement('div');
                const valueStr = value === null ? 'null' : String(value);
                const valueType = typeof value;
                let color = '#4a5568';
                let icon = 'üìÑ';
                
                if (valueType === 'string') { color = '#38a169'; icon = 'üìù'; }
                else if (valueType === 'number') { color = '#d69e2e'; icon = 'üî¢'; }
                else if (valueType === 'boolean') { color = '#9f7aea'; icon = '‚úÖ'; }
                else if (value === null) { color = '#a0aec0'; icon = '‚ùå'; }
                
                element.innerHTML = `<span style="color: #2d3748; font-weight: 600;">${icon} ${key}:</span> <span style="color: ${color};">${valueType === 'string' ? '"' + valueStr + '"' : valueStr}</span>`;
                wrapper.appendChild(element);
            }
            
            return wrapper;
        }
        
        function expandAllNodes(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // Find all clickable tree nodes (divs containing spans with cursor: pointer)
            container.querySelectorAll('span[style*="cursor: pointer"]').forEach(span => {
                if (span.innerHTML.includes('‚ñ∂')) {
                    span.parentElement.click();
                }
            });
        }
        
        function collapseAllNodes(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // Find all clickable tree nodes (divs containing spans with cursor: pointer)
            container.querySelectorAll('span[style*="cursor: pointer"]').forEach(span => {
                if (span.innerHTML.includes('‚ñº')) {
                    span.parentElement.click();
                }
            });
        }
    </script>
</body>
</html>