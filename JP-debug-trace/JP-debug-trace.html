<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>JP-debug-trace - MARC Records</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; line-height: 1.6; background: #fafafa; }
        
        /* Header */
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .header h1 { margin: 0; font-size: 2em; font-weight: 300; }
        .header p { margin: 10px 0 0; opacity: 0.9; }
        
        /* Image Gallery */
        .image-gallery { display: flex; gap: 15px; overflow-x: auto; padding: 20px 0; margin-bottom: 30px; background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .thumbnail-container { flex-shrink: 0; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .thumbnail-container:hover { transform: scale(1.02); box-shadow: 0 4px 15px rgba(0,0,0,0.15); }
        .thumbnail { width: 200px; height: 300px; object-fit: cover; border-radius: 8px; border: 3px solid #e0e0e0; transition: border-color 0.2s ease; }
        .thumbnail-container:hover .thumbnail { border-color: #667eea; }
        .thumbnail-label { text-align: center; margin-top: 8px; font-size: 0.85em; color: #666; font-weight: 500; word-break: break-word; max-width: 200px; }
        .no-images { text-align: center; padding: 40px; color: #999; font-style: italic; background: white; border-radius: 10px; margin-bottom: 30px; }
        
        /* Modal */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); }
        .modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 90vw; max-height: 90vh; }
        .modal-image { max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .modal-close { position: absolute; top: 15px; right: 20px; color: white; font-size: 30px; font-weight: bold; cursor: pointer; z-index: 1001; width: 40px; height: 40px; border-radius: 50%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; transition: background 0.2s ease; }
        .modal-close:hover { background: rgba(255,0,0,0.7); }
        .modal-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; padding: 15px 20px; font-size: 18px; cursor: pointer; border-radius: 5px; transition: background 0.2s ease; }
        .modal-nav:hover { background: rgba(0,0,0,0.8); }
        .modal-prev { left: 20px; }
        .modal-next { right: 20px; }
        .modal-counter { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); color: white; background: rgba(0,0,0,0.7); padding: 8px 16px; border-radius: 20px; font-size: 14px; }
        
        /* MARC Records */
        .records-section h2 { color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; margin: 30px 0 20px; }
        .marc-record { background: white; border: none; margin-bottom: 25px; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .marc-record h3 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .confidence { background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); padding: 6px 12px; border-radius: 20px; display: inline-block; margin-bottom: 15px; color: #2c5530; font-weight: 500; font-size: 0.9em; }
        .review-flag { background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%); border: none; color: #d63031; padding: 6px 12px; border-radius: 20px; margin-bottom: 15px; font-weight: 500; font-size: 0.9em; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 5px rgba(0,0,0,0.05); }
        th, td { padding: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #f0f0f0; }
        th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-weight: 600; width: 100px; }
        .subfield-code { font-weight: bold; color: #667eea; background: #f8f9ff; padding: 2px 4px; border-radius: 3px; margin-right: 5px; }
        .no-records { text-align: center; padding: 40px; color: #999; font-style: italic; background: white; border-radius: 10px; margin-bottom: 30px; }
        
        /* External API Results */
        .api-results-section { background: white; border-radius: 10px; padding: 20px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .api-results-section h2 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .api-summary { background: #f8f9ff; border: 1px solid #e0e6ff; border-radius: 6px; padding: 12px; margin-bottom: 20px; }
        .api-summary p { margin: 0; color: #333; font-size: 0.95em; }
        .api-source { margin-bottom: 20px; }
        .api-source h3 { color: #667eea; margin-bottom: 10px; font-size: 1.1em; }
        .api-matches { background: #f8f9ff; border-radius: 8px; padding: 15px; margin-bottom: 15px; }
        .api-match { background: white; border: 1px solid #e0e0e0; border-radius: 6px; padding: 10px; margin-bottom: 10px; }
        .api-match:last-child { margin-bottom: 0; }
        .match-title { font-weight: 600; color: #333; margin-bottom: 5px; }
        .match-author { color: #666; margin-bottom: 5px; }
        .match-details { font-size: 0.9em; color: #888; }
        .no-matches { text-align: center; padding: 20px; color: #999; font-style: italic; }
        .api-no-results { }
        .search-details { background: #f8f9fa; border-radius: 6px; padding: 15px; margin-top: 15px; }
        .search-details h4 { margin-top: 0; color: #495057; }
        .search-details ul { margin: 10px 0; padding-left: 20px; }
        .search-details li { margin-bottom: 5px; color: #6c757d; }
        .search-details em { color: #6c757d; }
        .authority-result { display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 0.85em; margin-right: 10px; }
        .authority-valid { background: #d4edda; color: #155724; }
        .authority-invalid { background: #f8d7da; color: #721c24; }
        
        /* JSON Tree View */
        .json-tree-section { background: white; border-radius: 10px; padding: 20px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .json-tree-section h2 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .tree-container { border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; background: #fafafa; max-height: 600px; overflow-y: auto; font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono", monospace; }
        .expand-all-btn, .collapse-all-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 8px 16px; border-radius: 20px; cursor: pointer; margin-right: 10px; margin-bottom: 15px; font-size: 0.9em; transition: transform 0.2s ease; }
        .expand-all-btn:hover, .collapse-all-btn:hover { transform: translateY(-1px); }
        
        /* Footer */
        .footer { text-align: center; padding: 20px; color: #666; font-size: 0.9em; background: white; border-radius: 10px; margin-top: 30px; }
        .footer a { color: #667eea; text-decoration: none; font-weight: 500; }
        .footer a:hover { text-decoration: underline; }
        
        /* Responsive */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .thumbnail { width: 150px; height: 225px; }
            .thumbnail-label { max-width: 150px; }
            .modal-nav { display: none; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>JP-debug-trace</h1>
        <p>üìö MARC Records generated by marcsnarc on 2025-12-23 13:29:21</p>
    </div>
    
    <div class='image-gallery'>

                <div class='thumbnail-container' onclick='openModal(0)'>
                    <img src='img_PXL_20251212_165802824.webp' alt='PXL_20251212_165802824.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165802824.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(1)'>
                    <img src='img_PXL_20251212_165807773.webp' alt='PXL_20251212_165807773.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165807773.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(2)'>
                    <img src='img_PXL_20251212_165816342.webp' alt='PXL_20251212_165816342.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165816342.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(3)'>
                    <img src='img_PXL_20251212_165825246.webp' alt='PXL_20251212_165825246.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165825246.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(4)'>
                    <img src='img_PXL_20251212_165855357.webp' alt='PXL_20251212_165855357.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165855357.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(5)'>
                    <img src='img_PXL_20251212_165928834.webp' alt='PXL_20251212_165928834.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165928834.jpg</div>
                </div>
                </div>

    
    <!-- Modal for image viewing -->
    <div id="imageModal" class="modal">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <button class="modal-nav modal-prev" onclick="changeImage(-1)">‚Äπ</button>
        <button class="modal-nav modal-next" onclick="changeImage(1)">‚Ä∫</button>
        <div class="modal-content">
            <img id="modalImage" class="modal-image" src="" alt="">
        </div>
        <div class="modal-counter" id="modalCounter"></div>
    </div>
    
    <div class="records-section">
        <h2>üìã MARC Records</h2>
        <div class='marc-record'>
<h3>Record 1</h3>
<div class='confidence'>Confidence: 0.47</div>
<div class='review-flag'>‚ö†Ô∏è Review Required</div>
<table><tr><th>LDR</th><td>00000nam a200000 Ki 500</td></tr><tr><th>001</th><td>msn20251223192920</td></tr><tr><th>003</th><td>DLC</td></tr><tr><th>005</th><td>20251223192920.0</td></tr><tr><th>008</th><td>251223m19372006            o     00jpn und d</td></tr><tr><th>040</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>DLC <span class="subfield-code">‚Ä°b</span>eng <span class="subfield-code">‚Ä°c</span>DLC <span class="subfield-code">‚Ä°e</span>rda </td></tr><tr><th>245</th><td><strong>00</strong> <span class="subfield-code">‚Ä°a</span>JP-debug-trace </td></tr><tr><th>264</th><td><strong>_1</strong> <span class="subfield-code">‚Ä°c</span>1937 </td></tr><tr><th>300</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>6 items (various formats) </td></tr><tr><th>520</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Collection consists of 1 books, 5 other items. Items date from 1937 to 2006. </td></tr><tr><th>500</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Collection-level record for 6 items </td></tr><tr><th>500</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Provenance: Extracted from 6 images using marcsnarc </td></tr><tr><th>561</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Extracted from 6 images using marcsnarc </td></tr><tr><th>650</th><td><strong>_0</strong> <span class="subfield-code">‚Ä°a</span>Sino-Japanese War </td></tr><tr><th>650</th><td><strong>_0</strong> <span class="subfield-code">‚Ä°a</span>Japanese military history </td></tr><tr><th>650</th><td><strong>_0</strong> <span class="subfield-code">‚Ä°a</span>Propaganda </td></tr><tr><th>999</th><td><strong>__</strong> <span class="subfield-code">‚Ä°i</span>Generated by marcsnarc on 2025-12-23 <span class="subfield-code">‚Ä°s</span>marcsnarc </td></tr></table></div>

    </div>
    
    <div class="api-results-section">
<h2>üåê External API Results</h2>
<div class="api-summary">
<p><strong>Search Summary:</strong> 2 item(s) searched across WorldCat, Library of Congress, and Alma catalogs</p>
</div>
<div class="api-no-results">
<div class="no-matches">External catalog searches were performed but no matches were found.</div>
<div class="search-details">
<p><strong>Search Status by Service:</strong></p>
<ul>
<li><strong>üìö WorldCat:</strong> Search attempted - likely failed due to server issues or no matches</li>
<li><strong>üèõÔ∏è Library of Congress:</strong> Authority validation performed</li>
<li><strong>üéì Alma Catalog:</strong> Local catalog searched</li>
</ul>
<p><em>Check the processing logs for detailed error messages.</em></p>
</div>
</div>
</div>

    
    
            <div class='json-tree-section'>
                <h2>üìä Analysis Data</h2>
                <div class='tree-container' id='analysis-tree'></div>
                <button class='expand-all-btn' onclick='expandAllNodes("analysis-tree")'>
                    üîç Expand All
                </button>
                <button class='collapse-all-btn' onclick='collapseAllNodes("analysis-tree")'>
                    üìÅ Collapse All
                </button>
            </div>
            
            <div class='json-tree-section'>
                <h2>üìã Processing Metadata</h2>
                <div class='tree-container' id='metadata-tree'></div>
                <button class='expand-all-btn' onclick='expandAllNodes("metadata-tree")'>
                    üîç Expand All
                </button>
                <button class='collapse-all-btn' onclick='collapseAllNodes("metadata-tree")'>
                    üìÅ Collapse All
                </button>
            </div>
            
    
    <div class="footer">
        Generated with <a href="https://github.com/anthropics/marcsnarc">marcsnarc</a> - AI-powered MARC cataloging
    </div>
    
    <script>
        // Global variables for modal and JSON data
        let currentImages = [];
        let currentImageIndex = 0;
        const analysisData = {"collection_analysis": {"item_count": 6, "formats": {"format_counts": {"pictorial magazine": 1, "pamphlet": 1, "note|adhesive note": 1, "periodical/magazine": 1, "printed bibliography page": 1, "magazine": 1}, "unique_formats": "{'magazine', 'pamphlet', 'printed bibliography page', 'note|adhesive note', 'periodical/magazine', 'pictorial magazine'}", "books": 1, "serials": 0, "ephemera": 0, "other": 5, "primary_format": "pictorial magazine"}, "creators": {"creator_counts": {"ÊÅ©‰∫ïËåÇÊñé": 1, "Unknown - appears to be a bibliography or catalog": 1, "T≈çky≈ç nichi nichi shimbunsha (Tokyo Daily News)": 1}, "unique_creators": "{'T≈çky≈ç nichi nichi shimbunsha (Tokyo Daily News)', 'Unknown - appears to be a bibliography or catalog', 'ÊÅ©‰∫ïËåÇÊñé'}", "items_with_creators": 3, "items_without_creators": 3, "dominant_creator": ["ÊÅ©‰∫ïËåÇÊñé", 1]}, "dates": {"date_range": [1937, 2006], "earliest_date": 1937, "latest_date": 2006, "date_span": 69, "items_with_dates": 3, "date_counts": {"1937": 1, "1938": 1, "2006": 1}}, "languages": {"language_counts": {"jpn": 3, "eng": 1, "english with chinese and japanese text": 1, "japanese and english": 1}, "unique_languages": "{'english with chinese and japanese text', 'jpn', 'japanese and english', 'eng'}", "primary_language": "jpn", "multilingual": true}, "subjects": {"subject_counts": {"Sino-Japanese War": 2, "China Incident": 1, "Japanese military history": 2, "War photography": 1, "Propaganda": 2, "Japanese soldiers": 1, "Chinese civilians": 1, "Manchuria": 1, "Maps": 1, "Geography": 1, "Japanese colonial period": 1, "North China Incident": 1, "Military photography": 1, "War reporting": 1, "1930s China-Japan conflict": 1, "Osaka": 1, "Japanese history": 1, "Chinese national government under Wang Jingwei": 1, "East Asia War": 1, "Japanese puppet regimes": 1, "Burma after declaration": 1, "International Concession in Shanghai": 1, "New Guinea": 1, "Aboriginal peoples": 1, "World War II": 1, "Japan's war": 1, "East Asia": 1, "Military history": 1, "Combined Fleet": 1, "Burma front": 1, "Admiral Soemu Toyoda": 1, "Burma campaigns": 1, "India Burma front": 1, "Minrachi Koga": 1, "Loiyang Condition": 1}, "unique_subjects": "{'War photography', 'East Asia War', 'Osaka', 'Maps', 'Military photography', 'Geography', 'International Concession in Shanghai', 'Japanese puppet regimes', 'India Burma front', 'Sino-Japanese War', 'Japanese history', 'Loiyang Condition', 'War reporting', 'Burma front', 'Japanese colonial period', 'Admiral Soemu Toyoda', 'Propaganda', 'Burma campaigns', \"Japan's war\", '1930s China-Japan conflict', 'Manchuria', 'Japanese military history', 'Japanese soldiers', 'World War II', 'New Guinea', 'East Asia', 'Chinese national government under Wang Jingwei', 'North China Incident', 'Combined Fleet', 'Minrachi Koga', 'Military history', 'Chinese civilians', 'China Incident', 'Aboriginal peoples', 'Burma after declaration'}", "items_with_subjects": 5, "common_subjects": [["Sino-Japanese War", 2], ["Japanese military history", 2], ["Propaganda", 2], ["China Incident", 1], ["War photography", 1]], "subject_coherence": 3.2095238095238092}, "provenance": {"collection_provenance": "Extracted from 6 images using marcsnarc", "item_provenances": {}, "consistency_score": 1.0, "has_provenance": true}, "identifiers": {"items_with_isbn": 0, "items_with_issn": 0, "items_with_oclc": 0, "items_with_lccn": 0, "identifier_coverage": 0.0}, "physical_characteristics": {"extent_variety": 5, "dimension_variety": 4, "physical_coherence": 0.25}, "format_diversity": 6, "creator_diversity": 3, "has_books_serials": true, "shared_provenance": true, "temporal_coherence": 0.2, "workflow_type": "collection_images_to_marc", "collection_name": "JP-debug-trace", "processing_timestamp": "2025-12-23T13:29:20.701859", "total_records": 1, "approach": "collection"}, "batch_analysis": {"collection_name": "JP-debug-trace", "total_images": 6, "successful_analyses": 6, "failed_analyses": 0, "individual_results": [{"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165807773.jpg", "extracted_data": {"title": "The Shina Jihen Gaho (The China Incident Pictorial)", "publication_place": "Osaka and Tokyo, Japan", "publication_date": "early 2000s (item described); 1937-1939 (original publication)", "normalized_date": {"normalized": "1937", "end_date": "1939", "circa": false, "uncertain": false, "original": "early 2000s (item described); 1937-1939 (original publication)"}, "format": "pictorial magazine", "extent": "multiple issues", "language": "jpn", "original_script_title": "Japanese (with Chinese characters/Kanji)", "other_identifiers": "Lingwai-123 via eBay; for ca. $15 per issue", "subjects": [{"heading": "Sino-Japanese War", "type": "topical", "source": "claude_analysis"}, {"heading": "China Incident", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese military history", "type": "topical", "source": "claude_analysis"}, {"heading": "War photography", "type": "topical", "source": "claude_analysis"}, {"heading": "Propaganda", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese soldiers", "type": "topical", "source": "claude_analysis"}, {"heading": "Chinese civilians", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "This appears to be a bibliographic entry or catalog record describing issues of Shina Jihen Gaho, a large format box photo-illustrated magazine about the war in China", "source": "image_analysis"}, {"text": "Multiple specific issues are referenced with dates and cover descriptions", "source": "image_analysis"}, {"text": "Mentions fifteen sets of issues available from covers that include various war-related content", "source": "image_analysis"}, {"text": "References articles and day summaries of war news as well as photos", "source": "image_analysis"}, {"text": "Includes details about soldiers, daily life in China, collaborators, and civilians", "source": "image_analysis"}, {"text": "Contains alternate title: ÊîØÈÇ£‰∫ãÂ§âÁîªÂ†± (Shina jihen gaho) in North China", "source": "image_analysis"}, {"text": "Published in both Osaka and Tokyo", "source": "image_analysis"}, {"text": "Text mentions purchase information via eBay from seller Lingwai-123", "source": "image_analysis"}, {"text": "Specific issue descriptions provided: Issue no. 1 (Cover: Soldiers in trench using periscope), Issue no. 5 (Cover: Special Issue of war in Shanghai Cover: Japanese sniper on rooftop), Issue no. 7 (Cover: soldier climbs through hole in brick wall), among others dated from August 1937 to September 1939", "source": "image_analysis"}, {"text": "References military themes including campaigns, aircraft, hand embroidery, street scenes", "source": "image_analysis"}, {"text": "Note about rear covers describing magazines devoted to war in China", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.765, "creator": 0.2, "publication": 0.39, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.48425}, "overall_confidence": 0.48425, "claude_factors": {"text_clarity": "high", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "ÊîØÈÇ£‰∫ãÂ§âÁîªÂ†± (Shina jihen gaho)", "language": "Japanese", "location": "title"}, {"text": "Publisher: Â§ßÂùÇÊØèÊó•Êñ∞ËÅûÁ§æ (Osaka mai nichi Shimbun sha) and Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ (Tokyo nichi nichi Shimbun)", "language": "Japanese", "location": "publisher information"}, {"text": "ÊîØÈÇ£‰∫ãÂ§âÁîªÂ†± (Hokushi jihen gaho) (North China)", "language": "Japanese", "location": "alternate title"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided", "No creator/author information found"], "review_required": true, "sequence_number": 1}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165928834.jpg", "extracted_data": {"title": "Ê∫ÄÊ¥≤Âú∞Âõ≥", "creator": {"name": "ÊÅ©‰∫ïËåÇÊñé", "type": "personal", "source": "claude_analysis", "romanization": "Onoi Shigeyoshi"}, "format": "pamphlet", "extent": "Single sheet, printed on one side", "dimensions": "Approximately A4 or similar size", "language": "jpn", "original_script_title": "Japanese (Kanji and Kana)", "subjects": [{"heading": "Manchuria", "type": "topical", "source": "claude_analysis"}, {"heading": "Maps", "type": "topical", "source": "claude_analysis"}, {"heading": "Geography", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese colonial period", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Image is oriented sideways (rotated 90 degrees)", "source": "image_analysis"}, {"text": "Contains photographic or illustrated images showing landscapes and architecture", "source": "image_analysis"}, {"text": "Appears to be promotional or educational material about Manchuria", "source": "image_analysis"}, {"text": "Shows signs of age with discoloration and wear", "source": "image_analysis"}, {"text": "Contains multiple text blocks in Japanese script", "source": "image_analysis"}, {"text": "Top margin contains dense text in Japanese characters", "source": "image_analysis"}, {"text": "Material appears to be from the pre-WWII or wartime period based on subject matter and printing style", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.0, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.4365}, "overall_confidence": 0.4365, "claude_factors": {"text_clarity": "medium", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "Ê∫ÄÊ¥≤Âú∞Âõ≥", "language": "Japanese", "location": "title area (center-right when rotated)"}, {"text": "Ê∫ÄÊ¥≤„ÅÆËàûË∏ä„Å®Â®ØÊ•Ω\nÊ∫ÄÊ¥≤„ÅÆËàûË∏ä„Å®Â®ØÊ•Ω", "language": "Japanese", "location": "subtitle area"}, {"text": "ÊÅ©‰∫ïËåÇÊñé", "language": "Japanese", "location": "left margin (creator attribution)"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 2}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165802824.jpg", "extracted_data": {"format": "note|adhesive note", "extent": "1 adhesive note", "dimensions": "approximately 10 x 8 cm (standard Post-it note size)", "language": "eng", "original_script_title": "Latin", "notes": [{"text": "Blue/light blue adhesive note (Post-it style) on wooden surface", "source": "image_analysis"}, {"text": "Handwritten text in blue/dark blue pen or marker", "source": "image_analysis"}, {"text": "Text appears to read 'Bethman' or similar, written vertically/at an angle", "source": "image_analysis"}, {"text": "Not a bibliographic item - appears to be a personal note or reminder", "source": "image_analysis"}, {"text": "Handwriting is cursive/script style", "source": "image_analysis"}, {"text": "Item photographed on what appears to be oak or similar wood grain surface", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.45499999999999996, "creator": 0.2, "publication": 0.0, "format": 0.26, "language": 0.5850000000000001, "overall": 0.284}, "overall_confidence": 0.284, "claude_factors": {"text_clarity": "medium", "completeness": "low", "language_certainty": "high"}, "original_text_regions": [{"text": "Bethman (or similar - handwriting unclear)", "language": "English", "location": "center of adhesive note"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Bibliographic information appears incomplete in image", "Contains CJK characters - romanization provided", "No title could be extracted from image", "No creator/author information found"], "review_required": true, "sequence_number": 3}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165855357.jpg", "extracted_data": {"title": "ÂåóÊîØ‰∫ãÂ§âÁîªÂ†±", "publication_date": "Êò≠ÂíåÂçÅ‰∏âÂπ¥ÂÖ´Êúà (August 1938)", "normalized_date": {"normalized": "1938", "end_date": null, "circa": false, "uncertain": false, "original": "Êò≠ÂíåÂçÅ‰∏âÂπ¥ÂÖ´Êúà (August 1938)"}, "format": "periodical/magazine", "extent": "1 issue", "dimensions": "Approximately standard magazine size", "language": "jpn", "original_script_title": "Traditional Chinese characters (Kanji)", "other_identifiers": "Á¨¨‰∏ÄËºØ (Volume/Issue 1)", "subjects": [{"heading": "Sino-Japanese War", "type": "topical", "source": "claude_analysis"}, {"heading": "North China Incident", "type": "topical", "source": "claude_analysis"}, {"heading": "Military photography", "type": "topical", "source": "claude_analysis"}, {"heading": "War reporting", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese military history", "type": "topical", "source": "claude_analysis"}, {"heading": "1930s China-Japan conflict", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Cover shows soldiers in helmets with rifles in combat or field position", "source": "image_analysis"}, {"text": "Black and white photographic cover", "source": "image_analysis"}, {"text": "Title translates to 'North China Incident Pictorial Report'", "source": "image_analysis"}, {"text": "Publication appears to be a wartime photographic magazine", "source": "image_analysis"}, {"text": "Shows significant aging with discoloration on cover", "source": "image_analysis"}, {"text": "Historical document from the Second Sino-Japanese War period", "source": "image_analysis"}, {"text": "Text below title indicates editorial or publishing information", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.765, "creator": 0.2, "publication": 0.195, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.44525}, "overall_confidence": 0.44525, "claude_factors": {"text_clarity": "high", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "ÂåóÊîØ‰∫ãÂ§âÁîªÂ†±", "language": "Japanese", "location": "title banner"}, {"text": "Êò≠ÂíåÂçÅ‰∏âÂπ¥ÂÖ´Êúà", "language": "Japanese", "location": "left side date marking"}, {"text": "Á¨¨‰∏ÄËºØ", "language": "Japanese", "location": "left side issue number"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided", "No creator/author information found"], "review_required": true, "sequence_number": 4}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165816342.jpg", "extracted_data": {"title": "Bibliography or catalog entries for items related to Osaka", "creator": {"name": "Unknown - appears to be a bibliography or catalog", "type": "corporate", "source": "claude_analysis"}, "publication_date": "circa 2000s or later (references works up to 2006)", "normalized_date": {"normalized": "2006", "end_date": null, "circa": true, "uncertain": false, "original": "circa 2000s or later (references works up to 2006)"}, "format": "printed bibliography page", "extent": "Single page", "dimensions": "Standard letter or A4 size", "language": "english with chinese and japanese text", "original_script_title": "Latin script with Chinese characters (both traditional and simplified) and Japanese", "other_identifiers": "Contains entry numbers: [1930], [1943], [1944] visible", "subjects": [{"heading": "Osaka", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese history", "type": "topical", "source": "claude_analysis"}, {"heading": "Chinese national government under Wang Jingwei", "type": "topical", "source": "claude_analysis"}, {"heading": "East Asia War", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese puppet regimes", "type": "topical", "source": "claude_analysis"}, {"heading": "Burma after declaration", "type": "topical", "source": "claude_analysis"}, {"heading": "International Concession in Shanghai", "type": "topical", "source": "claude_analysis"}, {"heading": "New Guinea", "type": "topical", "source": "claude_analysis"}, {"heading": "Aboriginal peoples", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "This appears to be a page from a bibliography or catalog dealing with East Asian historical materials", "source": "image_analysis"}, {"text": "Multiple entries reference Osaka in various contexts", "source": "image_analysis"}, {"text": "Contains bilingual entries with Chinese/Japanese characters and English translations", "source": "image_analysis"}, {"text": "References various historical periods including 1943-1944", "source": "image_analysis"}, {"text": "Shows entries numbered in the [1930s]-[1940s] range", "source": "image_analysis"}, {"text": "Multiple publishers and locations mentioned including Showa, Tokyo, etc.", "source": "image_analysis"}, {"text": "References various book formats and magazine articles", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.15166666666666667, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.4668333333333333}, "overall_confidence": 0.4668333333333333, "claude_factors": {"text_clarity": "medium", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "Â§ßÈò™ÊØèÊó•Êñ∞ËÅûÁ§æ (Osaka mainichi shinbunsha)", "language": "Japanese", "location": "bibliography entries"}, {"text": "Êñ∞Ê∞ëÂ†± (Xinmin bao)", "language": "Chinese", "location": "bibliography entries"}, {"text": "Â§ßÈò™Êò•Áßã (Osaka shunj≈´)", "language": "Japanese", "location": "bibliography entries"}, {"text": "Various bibliographic entries containing mixed English, Chinese, and Japanese text describing publications about Osaka, wartime history, and East Asian topics", "language": "Mixed: English, Chinese, Japanese", "location": "Main body of page"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 5}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165825246.jpg", "extracted_data": {"title": "T≈çky≈ç nichi nichi shimbunsha shoz≈ç dai Nihon komonjo [A large format monthly illustrated magazine devoted to the news of Japan's war in greater East Asia]", "creator": {"name": "T≈çky≈ç nichi nichi shimbunsha (Tokyo Daily News)", "type": "corporate", "source": "claude_analysis", "romanization": "T≈çky≈ç nichi nichi shimbunsha"}, "publisher": "T≈çky≈ç nichi nichi shimbunsha (Tokyo Daily News)", "publication_date": "the early 2000s", "normalized_date": {"normalized": null, "end_date": null, "circa": false, "uncertain": true, "original": "the early 2000s"}, "format": "magazine", "language": "japanese and english", "original_script_title": "Japanese (mixed script with kanji and kana)", "other_identifiers": "Total issues held: 19. Cataloged July, 2019.", "subjects": [{"heading": "World War II", "type": "topical", "source": "claude_analysis"}, {"heading": "Japan's war", "type": "topical", "source": "claude_analysis"}, {"heading": "East Asia", "type": "topical", "source": "claude_analysis"}, {"heading": "Military history", "type": "topical", "source": "claude_analysis"}, {"heading": "Propaganda", "type": "topical", "source": "claude_analysis"}, {"heading": "Combined Fleet", "type": "topical", "source": "claude_analysis"}, {"heading": "Burma front", "type": "topical", "source": "claude_analysis"}, {"heading": "Admiral Soemu Toyoda", "type": "topical", "source": "claude_analysis"}, {"heading": "Burma campaigns", "type": "topical", "source": "claude_analysis"}, {"heading": "India Burma front", "type": "topical", "source": "claude_analysis"}, {"heading": "Minrachi Koga", "type": "topical", "source": "claude_analysis"}, {"heading": "Loiyang Condition", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "This appears to be a catalog or collection description page, possibly from a library or archive", "source": "image_analysis"}, {"text": "The text describes a Japanese wartime illustrated magazine from WWII era", "source": "image_analysis"}, {"text": "Mentions specific military content including: front cover of Admiral Soemu Toyoda, Combined Fleet operations, India Burma front campaigns", "source": "image_analysis"}, {"text": "References purchase details: 'purchased from Utzigawa123 via Ebay in the early 2000s'", "source": "image_analysis"}, {"text": "Contains reference to 'Death of Admiral Minrachi Koga, commander of the combined fleet, Loiyang Condition'", "source": "image_analysis"}, {"text": "Includes cataloging information indicating institutional holdings", "source": "image_analysis"}, {"text": "Text mentions 'four small holes punched along edge' suggesting physical condition notes", "source": "image_analysis"}, {"text": "Contains both Japanese title in original script and English translation/description", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.30333333333333334, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.49716666666666665}, "overall_confidence": 0.49716666666666665, "claude_factors": {"text_clarity": "medium", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "T≈çky≈ç nichi nichi shimbunsha shoz≈ç dai Nihon komonjo [Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ]", "language": "Japanese with romanization", "location": "main text body"}, {"text": "A large format monthly illustrated magazine devoted to the news of Japan's war in greater East Asia. Includes a day by day summary of the month's news. Rear covers are advertisements. Contents: Front cover: Admiral Soemu Toyoda, commander of the Combined Fleet, standing on the bridge. India Burma front. Scenes in Boigainville. Death of Admiral Minrachi Koga, commander of the combined fleet. Loiyang Condition. Excellent. Disbound, with four small holes punched along edge. Purchased from Utzigawa123 via Ebay in the early 2000s.", "language": "English", "location": "descriptive text"}, {"text": "Total issues held: 19. Cataloged July, 2019.", "language": "English", "location": "cataloging information"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 6}], "collection_analysis": {"total_items": 6, "successful_extractions": 6, "common_characteristics": {"primary_language": "jpn", "language_distribution": {"jpn": 3, "eng": 1, "english with chinese and japanese text": 1, "japanese and english": 1}, "primary_format": "pictorial magazine", "format_distribution": {"pictorial magazine": 1, "pamphlet": 1, "note|adhesive note": 1, "periodical/magazine": 1, "printed bibliography page": 1, "magazine": 1}, "publishers": {"T≈çky≈ç nichi nichi shimbunsha (Tokyo Daily News)": 1}}, "quality_assessment": {"average_confidence": 0.43566666666666665, "high_confidence_items": 0, "low_confidence_items": 6, "confidence_range": [0.284, 0.49716666666666665]}, "recommendations": ["More than 30% of items have low confidence - consider manual review", "Multiple languages detected - verify language coding", "6 items contain CJK characters - verify romanization"]}, "batch_confidence": 0.43566666666666665, "processing_timestamp": "2025-12-23T13:29:20.398979"}, "individual_extractions": [{"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165807773.jpg", "extraction_confidence": 0.48425, "extracted_fields": ["title", "publication_place", "publication_date", "normalized_date", "format", "extent", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165928834.jpg", "extraction_confidence": 0.4365, "extracted_fields": ["title", "creator", "format", "extent", "dimensions", "language", "original_script_title", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165802824.jpg", "extraction_confidence": 0.284, "extracted_fields": ["format", "extent", "dimensions", "language", "original_script_title", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165855357.jpg", "extraction_confidence": 0.44525, "extracted_fields": ["title", "publication_date", "normalized_date", "format", "extent", "dimensions", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165816342.jpg", "extraction_confidence": 0.4668333333333333, "extracted_fields": ["title", "creator", "publication_date", "normalized_date", "format", "extent", "dimensions", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165825246.jpg", "extraction_confidence": 0.49716666666666665, "extracted_fields": ["title", "creator", "publisher", "publication_date", "normalized_date", "format", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}], "external_api_results": [{"worldcat": [], "loc": [], "alma": [], "best_match": null}]};
        const metadataData = {"workflow_type": "collection_images_to_marc", "collection_name": "JP-debug-trace", "processing_result": {"approach": "collection", "records_generated": 1, "review_required": true, "groupings": {"approach": "collection", "total_items": 6, "groups": [{"type": "collection", "items": ["The Shina Jihen Gaho (The China Incident Pictorial)", "Ê∫ÄÊ¥≤Âú∞Âõ≥", "Untitled", "ÂåóÊîØ‰∫ãÂ§âÁîªÂ†±", "Bibliography or catalog entries for items related to Osaka", "T≈çky≈ç nichi nichi shimbunsha shoz≈ç dai Nihon komonjo [A large format monthly illustrated magazine devoted to the news of Japan's war in greater East Asia]"], "record_type": "collection"}]}}, "collection_data": {"total_items": 6, "source_images": ["examples/Japanese Prints in OCLC/PXL_20251212_165807773.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165928834.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165802824.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165855357.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165816342.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165825246.jpg"], "provenance": "Extracted from 6 images using marcsnarc"}, "batch_analysis_summary": {"total_images": 6, "successful_analyses": 6, "batch_confidence": 0.43566666666666665}, "processing_timestamp": "2025-12-23T13:29:20.701879"};
        
        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize images array from gallery
            const thumbnails = document.querySelectorAll('.thumbnail');
            currentImages = Array.from(thumbnails).map(img => ({
                src: img.src,
                alt: img.alt
            }));
            
            // Initialize JSON trees
            if (analysisData && Object.keys(analysisData).length > 0) {
                renderJsonTree('analysis-tree', analysisData);
            }
            if (metadataData && Object.keys(metadataData).length > 0) {
                renderJsonTree('metadata-tree', metadataData);
            }
        });
        
        // Modal functions
        function openModal(index) {
            currentImageIndex = index;
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const counter = document.getElementById('modalCounter');
            
            if (currentImages[index]) {
                modalImage.src = currentImages[index].src;
                modalImage.alt = currentImages[index].alt;
                counter.textContent = `${index + 1} of ${currentImages.length}`;
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function changeImage(direction) {
            currentImageIndex = (currentImageIndex + direction + currentImages.length) % currentImages.length;
            openModal(currentImageIndex);
        }
        
        // Keyboard controls
        document.addEventListener('keydown', function(e) {
            const modal = document.getElementById('imageModal');
            if (modal.style.display === 'block') {
                if (e.key === 'Escape') closeModal();
                if (e.key === 'ArrowLeft') changeImage(-1);
                if (e.key === 'ArrowRight') changeImage(1);
            }
        });
        
        // Close modal on background click
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });
        
        // JSON Tree rendering functions
        function renderJsonTree(containerId, data) {
            const container = document.getElementById(containerId);
            if (!container || !data) return;
            
            container.innerHTML = '';
            const tree = createTreeElement(data, '', 0);
            container.appendChild(tree);
        }
        
        function createTreeElement(value, key, level) {
            const wrapper = document.createElement('div');
            wrapper.style.marginLeft = `${level * 20}px`;
            wrapper.style.marginBottom = '3px';
            
            if (value && typeof value === 'object' && !Array.isArray(value)) {
                // Object
                const keyElement = document.createElement('div');
                keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìÅ ${key} {${Object.keys(value).length}}</span>`;
                keyElement.style.userSelect = 'none';
                
                const children = document.createElement('div');
                children.style.display = 'none';
                children.style.borderLeft = '2px solid #e2e8f0';
                children.style.marginLeft = '15px';
                children.style.paddingLeft = '10px';
                
                Object.entries(value).forEach(([childKey, childValue]) => {
                    children.appendChild(createTreeElement(childValue, childKey, 0));
                });
                
                keyElement.addEventListener('click', function() {
                    const isExpanded = children.style.display !== 'none';
                    if (isExpanded) {
                        children.style.display = 'none';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìÅ ${key} {${Object.keys(value).length}}</span>`;
                    } else {
                        children.style.display = 'block';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñº üìÇ ${key} {${Object.keys(value).length}}</span>`;
                    }
                });
                
                wrapper.appendChild(keyElement);
                wrapper.appendChild(children);
            } else if (Array.isArray(value)) {
                // Array
                const keyElement = document.createElement('div');
                keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìö ${key} [${value.length}]</span>`;
                keyElement.style.userSelect = 'none';
                
                const children = document.createElement('div');
                children.style.display = 'none';
                children.style.borderLeft = '2px solid #e2e8f0';
                children.style.marginLeft = '15px';
                children.style.paddingLeft = '10px';
                
                value.forEach((item, index) => {
                    children.appendChild(createTreeElement(item, `[${index}]`, 0));
                });
                
                keyElement.addEventListener('click', function() {
                    const isExpanded = children.style.display !== 'none';
                    if (isExpanded) {
                        children.style.display = 'none';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìö ${key} [${value.length}]</span>`;
                    } else {
                        children.style.display = 'block';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñº üìñ ${key} [${value.length}]</span>`;
                    }
                });
                
                wrapper.appendChild(keyElement);
                wrapper.appendChild(children);
            } else {
                // Primitive value
                const element = document.createElement('div');
                const valueStr = value === null ? 'null' : String(value);
                const valueType = typeof value;
                let color = '#4a5568';
                let icon = 'üìÑ';
                
                if (valueType === 'string') { color = '#38a169'; icon = 'üìù'; }
                else if (valueType === 'number') { color = '#d69e2e'; icon = 'üî¢'; }
                else if (valueType === 'boolean') { color = '#9f7aea'; icon = '‚úÖ'; }
                else if (value === null) { color = '#a0aec0'; icon = '‚ùå'; }
                
                element.innerHTML = `<span style="color: #2d3748; font-weight: 600;">${icon} ${key}:</span> <span style="color: ${color};">${valueType === 'string' ? '"' + valueStr + '"' : valueStr}</span>`;
                wrapper.appendChild(element);
            }
            
            return wrapper;
        }
        
        function expandAllNodes(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // Find all clickable tree nodes (divs containing spans with cursor: pointer)
            container.querySelectorAll('span[style*="cursor: pointer"]').forEach(span => {
                if (span.innerHTML.includes('‚ñ∂')) {
                    span.parentElement.click();
                }
            });
        }
        
        function collapseAllNodes(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // Find all clickable tree nodes (divs containing spans with cursor: pointer)
            container.querySelectorAll('span[style*="cursor: pointer"]').forEach(span => {
                if (span.innerHTML.includes('‚ñº')) {
                    span.parentElement.click();
                }
            });
        }
    </script>
</body>
</html>