<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>collection_test_20251222_164749 - MARC Records</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; line-height: 1.6; background: #fafafa; }
        
        /* Header */
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .header h1 { margin: 0; font-size: 2em; font-weight: 300; }
        .header p { margin: 10px 0 0; opacity: 0.9; }
        
        /* Image Gallery */
        .image-gallery { display: flex; gap: 15px; overflow-x: auto; padding: 20px 0; margin-bottom: 30px; background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .thumbnail-container { flex-shrink: 0; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .thumbnail-container:hover { transform: scale(1.02); box-shadow: 0 4px 15px rgba(0,0,0,0.15); }
        .thumbnail { width: 200px; height: 300px; object-fit: cover; border-radius: 8px; border: 3px solid #e0e0e0; transition: border-color 0.2s ease; }
        .thumbnail-container:hover .thumbnail { border-color: #667eea; }
        .thumbnail-label { text-align: center; margin-top: 8px; font-size: 0.85em; color: #666; font-weight: 500; word-break: break-word; max-width: 200px; }
        .no-images { text-align: center; padding: 40px; color: #999; font-style: italic; background: white; border-radius: 10px; margin-bottom: 30px; }
        
        /* Modal */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); }
        .modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 90vw; max-height: 90vh; }
        .modal-image { max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .modal-close { position: absolute; top: 15px; right: 20px; color: white; font-size: 30px; font-weight: bold; cursor: pointer; z-index: 1001; width: 40px; height: 40px; border-radius: 50%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; transition: background 0.2s ease; }
        .modal-close:hover { background: rgba(255,0,0,0.7); }
        .modal-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; padding: 15px 20px; font-size: 18px; cursor: pointer; border-radius: 5px; transition: background 0.2s ease; }
        .modal-nav:hover { background: rgba(0,0,0,0.8); }
        .modal-prev { left: 20px; }
        .modal-next { right: 20px; }
        .modal-counter { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); color: white; background: rgba(0,0,0,0.7); padding: 8px 16px; border-radius: 20px; font-size: 14px; }
        
        /* MARC Records */
        .records-section h2 { color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; margin: 30px 0 20px; }
        .marc-record { background: white; border: none; margin-bottom: 25px; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .marc-record h3 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .confidence { background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); padding: 6px 12px; border-radius: 20px; display: inline-block; margin-bottom: 15px; color: #2c5530; font-weight: 500; font-size: 0.9em; }
        .review-flag { background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%); border: none; color: #d63031; padding: 6px 12px; border-radius: 20px; margin-bottom: 15px; font-weight: 500; font-size: 0.9em; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 5px rgba(0,0,0,0.05); }
        th, td { padding: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #f0f0f0; }
        th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-weight: 600; width: 100px; }
        .subfield-code { font-weight: bold; color: #667eea; background: #f8f9ff; padding: 2px 4px; border-radius: 3px; margin-right: 5px; }
        .no-records { text-align: center; padding: 40px; color: #999; font-style: italic; background: white; border-radius: 10px; margin-bottom: 30px; }
        
        /* External API Results */
        .api-results-section { background: white; border-radius: 10px; padding: 20px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .api-results-section h2 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .api-source { margin-bottom: 20px; }
        .api-source h3 { color: #667eea; margin-bottom: 10px; font-size: 1.1em; }
        .api-matches { background: #f8f9ff; border-radius: 8px; padding: 15px; margin-bottom: 15px; }
        .api-match { background: white; border: 1px solid #e0e0e0; border-radius: 6px; padding: 10px; margin-bottom: 10px; }
        .api-match:last-child { margin-bottom: 0; }
        .match-title { font-weight: 600; color: #333; margin-bottom: 5px; }
        .match-author { color: #666; margin-bottom: 5px; }
        .match-details { font-size: 0.9em; color: #888; }
        .no-matches { text-align: center; padding: 20px; color: #999; font-style: italic; }
        .authority-result { display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 0.85em; margin-right: 10px; }
        .authority-valid { background: #d4edda; color: #155724; }
        .authority-invalid { background: #f8d7da; color: #721c24; }
        
        /* JSON Tree View */
        .json-tree-section { background: white; border-radius: 10px; padding: 20px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .json-tree-section h2 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .tree-container { border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; background: #fafafa; max-height: 600px; overflow-y: auto; font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono", monospace; }
        .expand-all-btn, .collapse-all-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 8px 16px; border-radius: 20px; cursor: pointer; margin-right: 10px; margin-bottom: 15px; font-size: 0.9em; transition: transform 0.2s ease; }
        .expand-all-btn:hover, .collapse-all-btn:hover { transform: translateY(-1px); }
        
        /* Footer */
        .footer { text-align: center; padding: 20px; color: #666; font-size: 0.9em; background: white; border-radius: 10px; margin-top: 30px; }
        .footer a { color: #667eea; text-decoration: none; font-weight: 500; }
        .footer a:hover { text-decoration: underline; }
        
        /* Responsive */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .thumbnail { width: 150px; height: 225px; }
            .thumbnail-label { max-width: 150px; }
            .modal-nav { display: none; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>collection_test_20251222_164749</h1>
        <p>üìö MARC Records generated by marcsnarc on 2025-12-22 16:49:32</p>
    </div>
    
    <div class='image-gallery'>

                <div class='thumbnail-container' onclick='openModal(0)'>
                    <img src='img_PXL_20251212_164209737.webp' alt='PXL_20251212_164209737.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_164209737.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(1)'>
                    <img src='img_PXL_20251212_164253582.webp' alt='PXL_20251212_164253582.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_164253582.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(2)'>
                    <img src='img_PXL_20251212_164339517.webp' alt='PXL_20251212_164339517.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_164339517.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(3)'>
                    <img src='img_PXL_20251212_164450342.webp' alt='PXL_20251212_164450342.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_164450342.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(4)'>
                    <img src='img_PXL_20251212_164650783.webp' alt='PXL_20251212_164650783.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_164650783.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(5)'>
                    <img src='img_PXL_20251212_164821071.webp' alt='PXL_20251212_164821071.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_164821071.jpg</div>
                </div>
                </div>

    
    <!-- Modal for image viewing -->
    <div id="imageModal" class="modal">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <button class="modal-nav modal-prev" onclick="changeImage(-1)">‚Äπ</button>
        <button class="modal-nav modal-next" onclick="changeImage(1)">‚Ä∫</button>
        <div class="modal-content">
            <img id="modalImage" class="modal-image" src="" alt="">
        </div>
        <div class="modal-counter" id="modalCounter"></div>
    </div>
    
    <div class="records-section">
        <h2>üìã MARC Records</h2>
        <div class='marc-record'>
<h3>Record 1</h3>
<div class='confidence'>Confidence: 0.47</div>
<div class='review-flag'>‚ö†Ô∏è Review Required</div>
<table><tr><th>LDR</th><td>00000nam a200000 Ki 500</td></tr><tr><th>001</th><td>msn20251222224931</td></tr><tr><th>003</th><td>DLC</td></tr><tr><th>005</th><td>20251222224931.0</td></tr><tr><th>008</th><td>251222m19581966            o     00chi und d</td></tr><tr><th>040</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>DLC <span class="subfield-code">‚Ä°b</span>eng <span class="subfield-code">‚Ä°c</span>DLC <span class="subfield-code">‚Ä°e</span>rda </td></tr><tr><th>245</th><td><strong>00</strong> <span class="subfield-code">‚Ä°a</span>collection_test_20251222_164749 </td></tr><tr><th>264</th><td><strong>_1</strong> <span class="subfield-code">‚Ä°c</span>1958 </td></tr><tr><th>300</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>6 items (various formats) </td></tr><tr><th>520</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Collection consists of 2 books, 4 other items. Items date from 1958 to 1966. </td></tr><tr><th>500</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Collection-level record for 6 items </td></tr><tr><th>500</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Provenance: Extracted from 6 images using marcsnarc </td></tr><tr><th>561</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Extracted from 6 images using marcsnarc </td></tr><tr><th>650</th><td><strong>_0</strong> <span class="subfield-code">‚Ä°a</span>Cultural Revolution </td></tr><tr><th>650</th><td><strong>_0</strong> <span class="subfield-code">‚Ä°a</span>Mao Zedong thought </td></tr><tr><th>999</th><td><strong>__</strong> <span class="subfield-code">‚Ä°i</span>Generated by marcsnarc on 2025-12-22 <span class="subfield-code">‚Ä°s</span>marcsnarc </td></tr></table></div>

    </div>
    
    <div class="api-results-section">
<h2>üåê External API Results</h2>
<div class="api-source"><h3>Record 1</h3>
</div>
<div class="api-source"><h3>Record 2</h3>
</div>
</div>

    
    
            <div class='json-tree-section'>
                <h2>üìä Analysis Data</h2>
                <div class='tree-container' id='analysis-tree'></div>
                <button class='expand-all-btn' onclick='expandAllNodes("analysis-tree")'>
                    üîç Expand All
                </button>
                <button class='collapse-all-btn' onclick='collapseAllNodes("analysis-tree")'>
                    üìÅ Collapse All
                </button>
            </div>
            
            <div class='json-tree-section'>
                <h2>üìã Processing Metadata</h2>
                <div class='tree-container' id='metadata-tree'></div>
                <button class='expand-all-btn' onclick='expandAllNodes("metadata-tree")'>
                    üîç Expand All
                </button>
                <button class='collapse-all-btn' onclick='collapseAllNodes("metadata-tree")'>
                    üìÅ Collapse All
                </button>
            </div>
            
    
    <div class="footer">
        Generated with <a href="https://github.com/anthropics/marcsnarc">marcsnarc</a> - AI-powered MARC cataloging
    </div>
    
    <script>
        // Global variables for modal and JSON data
        let currentImages = [];
        let currentImageIndex = 0;
        const analysisData = {"collection_analysis": {"item_count": 6, "formats": {"format_counts": {"archival collection": 1, "manuscript": 3, "pamphlet": 2}, "unique_formats": "{'pamphlet', 'manuscript', 'archival collection'}", "books": 2, "serials": 0, "ephemera": 0, "other": 4, "primary_format": "manuscript"}, "creators": {"creator_counts": {"RVB collection": 1, "Áéã ÊØÖ": 1, "Red Guards of 'Anti-revisionist Commune'": 1, "‰∫∫Ê∞ëÊó•Êä• (People's Daily)": 1}, "unique_creators": "{\"‰∫∫Ê∞ëÊó•Êä• (People's Daily)\", 'Áéã ÊØÖ', 'RVB collection', \"Red Guards of 'Anti-revisionist Commune'\"}", "items_with_creators": 4, "items_without_creators": 2, "dominant_creator": ["RVB collection", 1]}, "dates": {"date_range": [1958, 1966], "earliest_date": 1958, "latest_date": 1966, "date_span": 8, "items_with_dates": 3, "date_counts": {"1966": 2, "1958": 1}}, "languages": {"language_counts": {"eng": 1, "chi": 5}, "unique_languages": "{'eng', 'chi'}", "primary_language": "chi", "multilingual": true}, "subjects": {"subject_counts": {"Chinese Cultural Revolution": 1, "handbills": 1, "propaganda": 1, "red guard groups": 1, "ephemera": 1, "leaflets": 1, "newspapers": 1, "Cultural Revolution": 3, "Railroad middle school No. 27": 1, "Revolutionary movement": 1, "Political education": 1, "Mao Zedong thought": 2, "Political ideology": 1, "Revolutionary literature": 1, "Chinese Communist theory": 1, "Cultural Revolution materials": 1, "Red Guards": 1, "Book banning": 1, "Anti-revisionist movement": 1, "Ouyang Hai": 1, "China - Political history - 1950s": 1, "Censorship": 1, "People's Liberation Army (PLA)": 1, "Revolutionary youth": 1, "Chinese Communist propaganda": 1}, "unique_subjects": "{'newspapers', 'leaflets', 'China - Political history - 1950s', 'Mao Zedong thought', 'handbills', \"People's Liberation Army (PLA)\", 'Political ideology', 'Revolutionary literature', 'Revolutionary movement', 'Revolutionary youth', 'ephemera', 'propaganda', 'Railroad middle school No. 27', 'Chinese Communist theory', 'Ouyang Hai', 'Cultural Revolution', 'Chinese Communist propaganda', 'Censorship', 'Anti-revisionist movement', 'red guard groups', 'Cultural Revolution materials', 'Political education', 'Book banning', 'Red Guards', 'Chinese Cultural Revolution'}", "items_with_subjects": 5, "common_subjects": [["Cultural Revolution", 3], ["Mao Zedong thought", 2], ["Chinese Cultural Revolution", 1], ["handbills", 1], ["propaganda", 1]], "subject_coherence": 2.3733333333333335}, "provenance": {"collection_provenance": "Extracted from 6 images using marcsnarc", "item_provenances": {}, "consistency_score": 1.0, "has_provenance": true}, "identifiers": {"items_with_isbn": 0, "items_with_issn": 0, "items_with_oclc": 0, "items_with_lccn": 0, "identifier_coverage": 0.0}, "physical_characteristics": {"extent_variety": 6, "dimension_variety": 2, "physical_coherence": 0.33333333333333337}, "format_diversity": 3, "creator_diversity": 4, "has_books_serials": true, "shared_provenance": true, "temporal_coherence": 0.8, "workflow_type": "collection_images_to_marc", "collection_name": "collection_test_20251222_164749", "processing_timestamp": "2025-12-22T16:49:31.901415", "total_records": 1, "approach": "collection"}, "batch_analysis": {"collection_name": "collection_test_20251222_164749", "total_images": 6, "successful_analyses": 6, "failed_analyses": 0, "individual_results": [{"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164209737.jpg", "extracted_data": {"title": "Archived Box 5 Chinese Cultural Revolution handbills, plus printed miscellany", "creator": {"name": "RVB collection", "type": "personal", "source": "claude_analysis"}, "publication_date": "1960s-1970s", "normalized_date": {"normalized": null, "end_date": null, "circa": false, "uncertain": true, "original": "1960s-1970s"}, "format": "archival collection", "extent": "1 box (newspaper extras)", "language": "eng", "original_script_title": "Latin", "other_identifiers": "Box 5", "subjects": [{"heading": "Chinese Cultural Revolution", "type": "topical", "source": "claude_analysis"}, {"heading": "handbills", "type": "topical", "source": "claude_analysis"}, {"heading": "propaganda", "type": "topical", "source": "claude_analysis"}, {"heading": "red guard groups", "type": "topical", "source": "claude_analysis"}, {"heading": "ephemera", "type": "topical", "source": "claude_analysis"}, {"heading": "leaflets", "type": "topical", "source": "claude_analysis"}, {"heading": "newspapers", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Archival collection arranged chronologically", "source": "image_analysis"}, {"text": "Contains poetry items listed below in separate box", "source": "image_analysis"}, {"text": "Items acquired in Hebei in late 80s and 90s", "source": "image_analysis"}, {"text": "Items are mixtures of newspapers and pamphlets", "source": "image_analysis"}, {"text": "Collection includes handbills, leaflets, newspaper extras", "source": "image_analysis"}, {"text": "Items arranged chronologically, some fragile", "source": "image_analysis"}, {"text": "Yellow sticky note indicates 'Cultural Revolution handbills, handbills + (?) Dec - 193 H ~ 1 - 20'", "source": "image_analysis"}, {"text": "Description mentions red guard groups, spokesperson groups, and organizations", "source": "image_analysis"}, {"text": "Items presented were long-lasting or only ephemeral", "source": "image_analysis"}, {"text": "Some additions in addition to handbills including poetry and ephemeral pieces", "source": "image_analysis"}, {"text": "Reference to 'People's Daily of Liberation Daily' (-NWIB, 2012.12.30)", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.765, "creator": 0.675, "publication": 0.195, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.5640000000000001}, "overall_confidence": 0.5640000000000001, "claude_factors": {"text_clarity": "high", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "Archived Box 5 Chinese Cultural Revolution handbills, plus printed miscellany. RVB collection. Arranged chronologically.", "language": "English", "location": "main label"}, {"text": "Cultural Revolution handbills, handbills + (?) Dec - 193 H ~ 1 - 20", "language": "English", "location": "yellow sticky note"}, {"text": "No 2 The poetry items listed below were all acquired in Hebei in the late 80s, 90s. They are a mixture of newspapers and pamphlets - I only like to know if any are unusual or spokesman's (?) of red guard groups or groups, plus printed miscellany. Since items listed below I need to groups and all of them s (?) are unusual such as proposals to change local place names, from local red guard groups and all of them s (?) are unusual representatives, some might be handbills of lengthily and only ephemeral but these leaflets represent a significant poetry, handbills will (?) these leaflets were likely handbills of lengthily and only ephemeral. These leaflets represent a significant poetry between additions (?) and whether the group represented was long-lasting or only ephemeral which was additions (?) and handbills newspaper such as 'People's Daily of Liberation Daily' (-NWIB, 2012.12.30)", "language": "English", "location": "descriptive text block"}], "processing_notes": ["Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 1}, {"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164650783.jpg", "extracted_data": {"title": "Cultural Revolution period manuscript materials", "creator": {"name": "Unknown", "type": "personal", "source": "claude_analysis"}, "publication_place": "China", "publication_date": "circa 1966-1976 (Cultural Revolution period)", "normalized_date": {"normalized": "1966", "end_date": "1976", "circa": true, "uncertain": false, "original": "circa 1966-1976 (Cultural Revolution period)"}, "format": "manuscript", "extent": "Multiple pages of handwritten documents with typed supplementary materials", "dimensions": "Standard letter/A4 size approximate", "language": "chi", "original_script_title": "Simplified Chinese characters", "other_identifiers": "Archival notation: 1766 D1 (visible on yellow note)", "subjects": [{"heading": "Cultural Revolution", "type": "topical", "source": "claude_analysis"}, {"heading": "Railroad middle school No. 27", "type": "topical", "source": "claude_analysis"}, {"heading": "Revolutionary movement", "type": "topical", "source": "claude_analysis"}, {"heading": "Political education", "type": "topical", "source": "claude_analysis"}, {"heading": "Mao Zedong thought", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Material appears to be archival documents from the Cultural Revolution period", "source": "image_analysis"}, {"text": "Yellow sticky note indicates: '1766 D1, Cultural Revolution Handbills, Three pages leaflet from, red guard in No 27 railroad middle school'", "source": "image_analysis"}, {"text": "Visible typed document discusses conflict between No. 27 revolutionary railroad middle school and railroad elementary school", "source": "image_analysis"}, {"text": "Mentions meeting in September 1966 and various revolutionary activities", "source": "image_analysis"}, {"text": "Handwritten manuscript in blue ink on aged paper", "source": "image_analysis"}, {"text": "Documents appear to be stored in protective plastic sleeves", "source": "image_analysis"}, {"text": "Materials discuss Revolutionary Pilgrimage (Èù©ÂëΩ‰∏≤ËÅî) and revolutionary committees", "source": "image_analysis"}, {"text": "Reference to Wei Fenglan and other historical figures", "source": "image_analysis"}, {"text": "Multiple sheets of paper with extensive handwritten text in Chinese", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.30333333333333334, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.49716666666666665}, "overall_confidence": 0.49716666666666665, "claude_factors": {"text_clarity": "medium", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "1766 D1\nCultural Revolution\nHandbills\nThree pages leaflet from\nred guard in No 27\nrailroad middle school", "language": "English", "location": "yellow sticky note on typed document"}, {"text": "Date: 1966 (?) Three page leaflet from red guards of the No. 27 revolutionary railroad middle school in conflict with the railroad elementary school.\nHeadline: ÈìÅ83Âè∑ÂëºÂêÅ\n[Train: 'Specially urgent appeal']\nPublished by: ‰∏ÄËµ∑ÊàòÈìÅÈªÑÂêÑÂÖµÂè∏Â§ñÊù•ÂÆûÂπ≤ÂÖµÁ∫¢Âç´ÂÖµ [a group in za cheng Mao Zedong zhuyi]", "language": "English with Chinese", "location": "typed document header"}, {"text": "[Extensive handwritten Chinese text covering multiple pages]", "language": "Chinese (Simplified)", "location": "main manuscript pages"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 2}, {"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164821071.jpg", "extracted_data": {"title": "ÂΩªÂ∫ïÊîπÈù©Áâ©ÂèçÂä®Ê¥æÔºàÂÖ´Á†¥ËÆ∫Ôºâ", "creator": {"name": "Áéã ÊØÖ", "type": "personal", "source": "claude_analysis", "romanization": "Wang Yi"}, "format": "pamphlet", "extent": "Single folded sheet, multi-column format", "language": "chi", "original_script_title": "Simplified Chinese characters", "subjects": [{"heading": "Political ideology", "type": "topical", "source": "claude_analysis"}, {"heading": "Revolutionary literature", "type": "topical", "source": "claude_analysis"}, {"heading": "Chinese Communist theory", "type": "topical", "source": "claude_analysis"}, {"heading": "Cultural Revolution materials", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Yellow sticky note with handwritten annotation visible", "source": "image_analysis"}, {"text": "Document appears to be a political pamphlet or essay from Chinese Communist period", "source": "image_analysis"}, {"text": "Text organized in multiple columns, traditional Chinese pamphlet layout", "source": "image_analysis"}, {"text": "Contains dense ideological content with references to revolutionary concepts", "source": "image_analysis"}, {"text": "Document shows signs of archival preservation (plastic covering visible)", "source": "image_analysis"}, {"text": "The title suggests content related to 'Eight Refutations' (ÂÖ´Á†¥ËÆ∫)", "source": "image_analysis"}, {"text": "Handwritten note on sticky note includes what appears to be reference numbers or classification marks", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.0, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.4365}, "overall_confidence": 0.4365, "claude_factors": {"text_clarity": "medium", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "ÂΩªÂ∫ïÊîπÈù©Áâ©ÂèçÂä®Ê¥æÔºàÂÖ´Á†¥ËÆ∫Ôºâ", "language": "Chinese", "location": "title header"}, {"text": "Áéã ÊØÖ", "language": "Chinese", "location": "author attribution"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 3}, {"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164339517.jpg", "extracted_data": {"title": "Urgent appeal to ban some books and songs, from red guards in the 'Anti-revisionist Commune'", "creator": {"name": "Red Guards of 'Anti-revisionist Commune'", "type": "corporate", "source": "claude_analysis", "romanization": "Fan Xiu Zheng Gonghe (Âèç‰øÆÊ≠£ÂÖ¨Á§æ)"}, "publisher": "Red Guards commune", "publication_place": "Beijing suburbs (Huangniangxiang area)", "publication_date": "1958", "normalized_date": {"normalized": "1958", "end_date": null, "circa": false, "uncertain": false, "original": "1958"}, "format": "manuscript", "extent": "2 pages (1 handwritten document, 1 typed English description)", "language": "chi", "original_script_title": "Simplified Chinese characters", "other_identifiers": "12.8.97 (date notation on yellow note); 92 (notation on yellow note)", "subjects": [{"heading": "Cultural Revolution", "type": "topical", "source": "claude_analysis"}, {"heading": "Red Guards", "type": "topical", "source": "claude_analysis"}, {"heading": "Book banning", "type": "topical", "source": "claude_analysis"}, {"heading": "Anti-revisionist movement", "type": "topical", "source": "claude_analysis"}, {"heading": "Ouyang Hai", "type": "topical", "source": "claude_analysis"}, {"heading": "China - Political history - 1950s", "type": "topical", "source": "claude_analysis"}, {"heading": "Censorship", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Item appears to be stored in plastic sleeve with yellow sticky note containing cataloging information", "source": "image_analysis"}, {"text": "Yellow note indicates: 'Cultural Revolution materials Urgent appeal to ban some books + songs from Red Guards in 'Anti-revisionist' Commune'", "source": "image_analysis"}, {"text": "English description mentions: 'Urgent appeal by ÂÖ≥ÂèëÂÖ¨Á§æ!!!! (Guan Fa Gonghe), published by Âèç‰øÆÊ≠£ÂÖ¨Á§æ (Fan Xiu Zheng Gonghe), the name of a village in the Beijing suburbs'", "source": "image_analysis"}, {"text": "Document relates to burning of books and songs, particularly those about Ouyang Hai (Ê¨ßÈò≥Êµ∑)", "source": "image_analysis"}, {"text": "Mentions context of former Beijing Party committee influence and purpose of burning unhealthy books and songs", "source": "image_analysis"}, {"text": "References Chairman Mao and related study materials", "source": "image_analysis"}, {"text": "Document discusses consequences for those who do not comply, including those in Huangniangxiang Commune", "source": "image_analysis"}, {"text": "Note mentions 'Minrod in handwriting with a pronounced right slant on two one sided sheets of Guardians, Very good'", "source": "image_analysis"}, {"text": "Marked as needing removal from a staple", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.45499999999999996, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.5275}, "overall_confidence": 0.5275, "claude_factors": {"text_clarity": "medium", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "Âèç‰øÆÊ≠£ÂÖ¨Á§æ!!!!", "language": "Chinese (Simplified)", "location": "Referenced in English description sheet"}, {"text": "ÂÖ≥ÂèëÂÖ¨Á§æ [Handwritten Chinese text visible on bottom document]", "language": "Chinese (Simplified)", "location": "Main manuscript page"}, {"text": "12.8.97 Cultural Revolution materials Urgent appeal to ban some books + songs from Red Guards in 'Anti-revisionist' Commune. 92", "language": "English", "location": "Yellow sticky note"}, {"text": "67.66.827 Urgent appeal to ban some books and songs, from red guards in the 'Anti-revisionist Commune' Headline: ÂÖ≥ÂèëÂÖ¨Á§æÔºÅÔºÅÔºÅ[?]Âè´Âñä!!! [Trans. Urgent appeal!!!] Published by Âèç‰øÆÊ≠£ÂÖ¨Á§æÔºàÊôÆÁúüÈïøÂ≤≠ÂÖ¨Á§æÔºâÊñáÂåñÂÆ´ÂÖ¨‰ΩìÈù©ÂëΩÈÄ†Âèç, Fanxiu gongsh√™ (Guan Huangxiang...)", "language": "English with Chinese characters", "location": "Typed description sheet"}], "processing_notes": ["Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 4}, {"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164450342.jpg", "extracted_data": {"title": "Èù©ÂëΩÈùíÂ∞ëÂπ¥Ë¶ÅÂêëËß£ÊîæÂÜõÂ≠¶‰π†", "subtitle": "‰∫∫Ê∞ëÊó•Êä•ÂÖ´Êúà‰∫åÂçÅÂÖ´Êó•Á§æËÆ∫", "creator": {"name": "‰∫∫Ê∞ëÊó•Êä• (People's Daily)", "type": "corporate", "source": "claude_analysis", "romanization": "Renmin Ribao"}, "publisher": "‰∫∫Ê∞ëÊó•Êä• (People's Daily)", "publication_place": "China", "publication_date": "1966-08-28", "normalized_date": {"normalized": "1966", "end_date": null, "circa": false, "uncertain": false, "original": "1966-08-28"}, "format": "pamphlet", "extent": "Single sheet, printed on one side", "dimensions": "Approximately standard newspaper/pamphlet size", "language": "chi", "original_script_title": "Simplified Chinese", "other_identifiers": "Catalog reference: RI.1966/9.3.28 People's Daily editorial from August 28", "subjects": [{"heading": "Cultural Revolution", "type": "topical", "source": "claude_analysis"}, {"heading": "People's Liberation Army (PLA)", "type": "topical", "source": "claude_analysis"}, {"heading": "Revolutionary youth", "type": "topical", "source": "claude_analysis"}, {"heading": "Mao Zedong thought", "type": "topical", "source": "claude_analysis"}, {"heading": "Chinese Communist propaganda", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "This is an editorial from People's Daily dated August 28, 1966, during the Cultural Revolution period", "source": "image_analysis"}, {"text": "Header contains Mao quotation in red: 'ËØªÊØõ‰∏ªÂ∏≠ÁöÑ‰π¶, Âê¨ÊØõ‰∏ªÂ∏≠ÁöÑËØù, ÁÖßÊØõ‰∏ªÂ∏≠ÁöÑÊåáÁ§∫Âäû‰∫ã, ÂÅöÊØõ‰∏ªÂ∏≠ÁöÑÂ•ΩÊàòÂ£´' (Read Chairman Mao's books, listen to Chairman Mao's words, follow Chairman Mao's directives, be Chairman Mao's good fighters)", "source": "image_analysis"}, {"text": "Yellow sticky note on wooden backing indicates acquisition information: '1966.8.28 Cultural Revolution broadside, People's Daily editorial from August 28'", "source": "image_analysis"}, {"text": "Item is mounted on wooden board with plastic covering", "source": "image_analysis"}, {"text": "White catalog card visible at top with detailed description in English", "source": "image_analysis"}, {"text": "Document calls for revolutionary youth to learn from the PLA", "source": "image_analysis"}, {"text": "Text discusses political education and revolutionary commitment", "source": "image_analysis"}, {"text": "Typical Cultural Revolution era propaganda material", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.765, "creator": 0.675, "publication": 0.5850000000000001, "format": 0.5850000000000001, "language": 0.5850000000000001, "overall": 0.6615}, "overall_confidence": 0.6615, "claude_factors": {"text_clarity": "high", "completeness": "high", "language_certainty": "high"}, "original_text_regions": [{"text": "ËØªÊØõ‰∏ªÂ∏≠ÁöÑ‰π¶, Âê¨ÊØõ‰∏ªÂ∏≠ÁöÑËØù, ÁÖßÊØõ‰∏ªÂ∏≠ÁöÑÊåáÁ§∫Âäû‰∫ã, ÂÅöÊØõ‰∏ªÂ∏≠ÁöÑÂ•ΩÊàòÂ£´", "language": "Chinese (Simplified)", "location": "header box"}, {"text": "Èù©ÂëΩÈùíÂ∞ëÂπ¥Ë¶ÅÂêëËß£ÊîæÂÜõÂ≠¶‰π†", "language": "Chinese (Simplified)", "location": "title"}, {"text": "(‰∫∫Ê∞ëÊó•Êä•ÂÖ´Êúà‰∫åÂçÅÂÖ´Êó•Á§æËÆ∫)", "language": "Chinese (Simplified)", "location": "subtitle"}, {"text": "RI.1966/9.3.28 People's Daily editorial from August 28", "language": "English", "location": "catalog card"}, {"text": "1966.8.28 Cultural Revolution broadside People's Daily editorial from August 28", "language": "English", "location": "yellow sticky note"}], "processing_notes": ["Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 5}, {"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164253582.jpg", "extracted_data": {"format": "manuscript", "extent": "Multiple documents including manuscript page, typed document, and handwritten note", "language": "chi", "original_script_title": "Traditional Chinese characters", "other_identifiers": "MS 23 (visible on yellow note)", "notes": [{"text": "Image shows three documents arranged on a wooden surface", "source": "image_analysis"}, {"text": "Yellow sticky note contains handwritten text including 'MS 23' and what appears to be cataloging or reference information", "source": "image_analysis"}, {"text": "Center document is a white typed page in English discussing 'A Provenance Journey for this Alumni of Yenching Cultural Institute'", "source": "image_analysis"}, {"text": "Right document is a larger beige/cream colored manuscript page with vertical columns of Traditional Chinese text", "source": "image_analysis"}, {"text": "Chinese manuscript appears to be a historical document with vertical writing format (traditional orientation)", "source": "image_analysis"}, {"text": "Paper clip attached to the Chinese manuscript", "source": "image_analysis"}, {"text": "Documents appear to be archival materials under examination or processing", "source": "image_analysis"}, {"text": "Text on English document mentions 'Yenching' and discusses provenance-related information", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.45499999999999996, "creator": 0.2, "publication": 0.0, "format": 0.26, "language": 0.5850000000000001, "overall": 0.284}, "overall_confidence": 0.284, "claude_factors": {"text_clarity": "medium", "completeness": "low", "language_certainty": "high"}, "original_text_regions": [{"text": "MS 23", "language": "English with numbers", "location": "yellow note"}, {"text": "A Provenance Journey for this Alumni of Yenching Cultural Institute [followed by Chinese text]", "language": "English and Chinese", "location": "typed document header"}, {"text": "[Vertical columns of Traditional Chinese characters - too numerous and small to fully transcribe accurately from image]", "language": "Chinese", "location": "main manuscript page"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Bibliographic information appears incomplete in image", "Contains CJK characters - romanization provided", "No title could be extracted from image", "No creator/author information found"], "review_required": true, "sequence_number": 6}], "collection_analysis": {"total_items": 6, "successful_extractions": 6, "common_characteristics": {"primary_language": "chi", "language_distribution": {"eng": 1, "chi": 5}, "primary_format": "manuscript", "format_distribution": {"archival collection": 1, "manuscript": 3, "pamphlet": 2}, "publishers": {"Red Guards commune": 1, "‰∫∫Ê∞ëÊó•Êä• (People's Daily)": 1}}, "quality_assessment": {"average_confidence": 0.4951111111111111, "high_confidence_items": 0, "low_confidence_items": 3, "confidence_range": [0.284, 0.6615]}, "recommendations": ["More than 30% of items have low confidence - consider manual review", "Multiple languages detected - verify language coding", "6 items contain CJK characters - verify romanization"]}, "batch_confidence": 0.4951111111111111, "processing_timestamp": "2025-12-22T16:49:31.692778"}, "individual_extractions": [{"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164209737.jpg", "extraction_confidence": 0.5640000000000001, "extracted_fields": ["title", "creator", "publication_date", "normalized_date", "format", "extent", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164650783.jpg", "extraction_confidence": 0.49716666666666665, "extracted_fields": ["title", "creator", "publication_place", "publication_date", "normalized_date", "format", "extent", "dimensions", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164821071.jpg", "extraction_confidence": 0.4365, "extracted_fields": ["title", "creator", "format", "extent", "language", "original_script_title", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164339517.jpg", "extraction_confidence": 0.5275, "extracted_fields": ["title", "creator", "publisher", "publication_place", "publication_date", "normalized_date", "format", "extent", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164450342.jpg", "extraction_confidence": 0.6615, "extracted_fields": ["title", "subtitle", "creator", "publisher", "publication_place", "publication_date", "normalized_date", "format", "extent", "dimensions", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Cultural Revolution Handbills/PXL_20251212_164253582.jpg", "extraction_confidence": 0.284, "extracted_fields": ["format", "extent", "language", "original_script_title", "other_identifiers", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}], "external_api_results": [{"worldcat": [], "loc": [], "alma": [], "best_match": null}]};
        const metadataData = {"workflow_type": "collection_images_to_marc", "collection_name": "collection_test_20251222_164749", "processing_result": {"approach": "collection", "records_generated": 1, "review_required": true, "groupings": {"approach": "collection", "total_items": 6, "groups": [{"type": "collection", "items": ["Archived Box 5 Chinese Cultural Revolution handbills, plus printed miscellany", "Cultural Revolution period manuscript materials", "ÂΩªÂ∫ïÊîπÈù©Áâ©ÂèçÂä®Ê¥æÔºàÂÖ´Á†¥ËÆ∫Ôºâ", "Urgent appeal to ban some books and songs, from red guards in the 'Anti-revisionist Commune'", "Èù©ÂëΩÈùíÂ∞ëÂπ¥Ë¶ÅÂêëËß£ÊîæÂÜõÂ≠¶‰π†", "Untitled"], "record_type": "collection"}]}}, "collection_data": {"total_items": 6, "source_images": ["examples/Cultural Revolution Handbills/PXL_20251212_164209737.jpg", "examples/Cultural Revolution Handbills/PXL_20251212_164650783.jpg", "examples/Cultural Revolution Handbills/PXL_20251212_164821071.jpg", "examples/Cultural Revolution Handbills/PXL_20251212_164339517.jpg", "examples/Cultural Revolution Handbills/PXL_20251212_164450342.jpg", "examples/Cultural Revolution Handbills/PXL_20251212_164253582.jpg"], "provenance": "Extracted from 6 images using marcsnarc"}, "batch_analysis_summary": {"total_images": 6, "successful_analyses": 6, "batch_confidence": 0.4951111111111111}, "processing_timestamp": "2025-12-22T16:49:31.901436"};
        
        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize images array from gallery
            const thumbnails = document.querySelectorAll('.thumbnail');
            currentImages = Array.from(thumbnails).map(img => ({
                src: img.src,
                alt: img.alt
            }));
            
            // Initialize JSON trees
            if (analysisData && Object.keys(analysisData).length > 0) {
                renderJsonTree('analysis-tree', analysisData);
            }
            if (metadataData && Object.keys(metadataData).length > 0) {
                renderJsonTree('metadata-tree', metadataData);
            }
        });
        
        // Modal functions
        function openModal(index) {
            currentImageIndex = index;
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const counter = document.getElementById('modalCounter');
            
            if (currentImages[index]) {
                modalImage.src = currentImages[index].src;
                modalImage.alt = currentImages[index].alt;
                counter.textContent = `${index + 1} of ${currentImages.length}`;
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function changeImage(direction) {
            currentImageIndex = (currentImageIndex + direction + currentImages.length) % currentImages.length;
            openModal(currentImageIndex);
        }
        
        // Keyboard controls
        document.addEventListener('keydown', function(e) {
            const modal = document.getElementById('imageModal');
            if (modal.style.display === 'block') {
                if (e.key === 'Escape') closeModal();
                if (e.key === 'ArrowLeft') changeImage(-1);
                if (e.key === 'ArrowRight') changeImage(1);
            }
        });
        
        // Close modal on background click
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });
        
        // JSON Tree rendering functions
        function renderJsonTree(containerId, data) {
            const container = document.getElementById(containerId);
            if (!container || !data) return;
            
            container.innerHTML = '';
            const tree = createTreeElement(data, '', 0);
            container.appendChild(tree);
        }
        
        function createTreeElement(value, key, level) {
            const wrapper = document.createElement('div');
            wrapper.style.marginLeft = `${level * 20}px`;
            wrapper.style.marginBottom = '3px';
            
            if (value && typeof value === 'object' && !Array.isArray(value)) {
                // Object
                const keyElement = document.createElement('div');
                keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìÅ ${key} {${Object.keys(value).length}}</span>`;
                keyElement.style.userSelect = 'none';
                
                const children = document.createElement('div');
                children.style.display = 'none';
                children.style.borderLeft = '2px solid #e2e8f0';
                children.style.marginLeft = '15px';
                children.style.paddingLeft = '10px';
                
                Object.entries(value).forEach(([childKey, childValue]) => {
                    children.appendChild(createTreeElement(childValue, childKey, 0));
                });
                
                keyElement.addEventListener('click', function() {
                    const isExpanded = children.style.display !== 'none';
                    if (isExpanded) {
                        children.style.display = 'none';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìÅ ${key} {${Object.keys(value).length}}</span>`;
                    } else {
                        children.style.display = 'block';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñº üìÇ ${key} {${Object.keys(value).length}}</span>`;
                    }
                });
                
                wrapper.appendChild(keyElement);
                wrapper.appendChild(children);
            } else if (Array.isArray(value)) {
                // Array
                const keyElement = document.createElement('div');
                keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìö ${key} [${value.length}]</span>`;
                keyElement.style.userSelect = 'none';
                
                const children = document.createElement('div');
                children.style.display = 'none';
                children.style.borderLeft = '2px solid #e2e8f0';
                children.style.marginLeft = '15px';
                children.style.paddingLeft = '10px';
                
                value.forEach((item, index) => {
                    children.appendChild(createTreeElement(item, `[${index}]`, 0));
                });
                
                keyElement.addEventListener('click', function() {
                    const isExpanded = children.style.display !== 'none';
                    if (isExpanded) {
                        children.style.display = 'none';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìö ${key} [${value.length}]</span>`;
                    } else {
                        children.style.display = 'block';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñº üìñ ${key} [${value.length}]</span>`;
                    }
                });
                
                wrapper.appendChild(keyElement);
                wrapper.appendChild(children);
            } else {
                // Primitive value
                const element = document.createElement('div');
                const valueStr = value === null ? 'null' : String(value);
                const valueType = typeof value;
                let color = '#4a5568';
                let icon = 'üìÑ';
                
                if (valueType === 'string') { color = '#38a169'; icon = 'üìù'; }
                else if (valueType === 'number') { color = '#d69e2e'; icon = 'üî¢'; }
                else if (valueType === 'boolean') { color = '#9f7aea'; icon = '‚úÖ'; }
                else if (value === null) { color = '#a0aec0'; icon = '‚ùå'; }
                
                element.innerHTML = `<span style="color: #2d3748; font-weight: 600;">${icon} ${key}:</span> <span style="color: ${color};">${valueType === 'string' ? '"' + valueStr + '"' : valueStr}</span>`;
                wrapper.appendChild(element);
            }
            
            return wrapper;
        }
        
        function expandAllNodes(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // Find all clickable tree nodes (divs containing spans with cursor: pointer)
            container.querySelectorAll('span[style*="cursor: pointer"]').forEach(span => {
                if (span.innerHTML.includes('‚ñ∂')) {
                    span.parentElement.click();
                }
            });
        }
        
        function collapseAllNodes(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // Find all clickable tree nodes (divs containing spans with cursor: pointer)
            container.querySelectorAll('span[style*="cursor: pointer"]').forEach(span => {
                if (span.innerHTML.includes('‚ñº')) {
                    span.parentElement.click();
                }
            });
        }
    </script>
</body>
</html>