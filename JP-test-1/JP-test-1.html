<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>JP-test-1 - MARC Records</title>
    <style>
        * { box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 20px; line-height: 1.6; background: #fafafa; }
        
        /* Header */
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .header h1 { margin: 0; font-size: 2em; font-weight: 300; }
        .header p { margin: 10px 0 0; opacity: 0.9; }
        
        /* Image Gallery */
        .image-gallery { display: flex; gap: 15px; overflow-x: auto; padding: 20px 0; margin-bottom: 30px; background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .thumbnail-container { flex-shrink: 0; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .thumbnail-container:hover { transform: scale(1.02); box-shadow: 0 4px 15px rgba(0,0,0,0.15); }
        .thumbnail { width: 200px; height: 300px; object-fit: cover; border-radius: 8px; border: 3px solid #e0e0e0; transition: border-color 0.2s ease; }
        .thumbnail-container:hover .thumbnail { border-color: #667eea; }
        .thumbnail-label { text-align: center; margin-top: 8px; font-size: 0.85em; color: #666; font-weight: 500; word-break: break-word; max-width: 200px; }
        .no-images { text-align: center; padding: 40px; color: #999; font-style: italic; background: white; border-radius: 10px; margin-bottom: 30px; }
        
        /* Modal */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); }
        .modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 90vw; max-height: 90vh; }
        .modal-image { max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .modal-close { position: absolute; top: 15px; right: 20px; color: white; font-size: 30px; font-weight: bold; cursor: pointer; z-index: 1001; width: 40px; height: 40px; border-radius: 50%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; transition: background 0.2s ease; }
        .modal-close:hover { background: rgba(255,0,0,0.7); }
        .modal-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; padding: 15px 20px; font-size: 18px; cursor: pointer; border-radius: 5px; transition: background 0.2s ease; }
        .modal-nav:hover { background: rgba(0,0,0,0.8); }
        .modal-prev { left: 20px; }
        .modal-next { right: 20px; }
        .modal-counter { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); color: white; background: rgba(0,0,0,0.7); padding: 8px 16px; border-radius: 20px; font-size: 14px; }
        
        /* MARC Records */
        .records-section h2 { color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; margin: 30px 0 20px; }
        .marc-record { background: white; border: none; margin-bottom: 25px; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .marc-record h3 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .confidence { background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); padding: 6px 12px; border-radius: 20px; display: inline-block; margin-bottom: 15px; color: #2c5530; font-weight: 500; font-size: 0.9em; }
        .review-flag { background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%); border: none; color: #d63031; padding: 6px 12px; border-radius: 20px; margin-bottom: 15px; font-weight: 500; font-size: 0.9em; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 5px rgba(0,0,0,0.05); }
        th, td { padding: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #f0f0f0; }
        th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-weight: 600; width: 100px; }
        .subfield-code { font-weight: bold; color: #667eea; background: #f8f9ff; padding: 2px 4px; border-radius: 3px; margin-right: 5px; }
        .no-records { text-align: center; padding: 40px; color: #999; font-style: italic; background: white; border-radius: 10px; margin-bottom: 30px; }
        
        /* External API Results */
        .api-results-section { background: white; border-radius: 10px; padding: 20px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .api-results-section h2 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .api-summary { background: #f8f9ff; border: 1px solid #e0e6ff; border-radius: 6px; padding: 12px; margin-bottom: 20px; }
        .api-summary p { margin: 0; color: #333; font-size: 0.95em; }
        .api-source { margin-bottom: 20px; }
        .api-source h3 { color: #667eea; margin-bottom: 10px; font-size: 1.1em; }
        .api-matches { background: #f8f9ff; border-radius: 8px; padding: 15px; margin-bottom: 15px; }
        .api-match { background: white; border: 1px solid #e0e0e0; border-radius: 6px; padding: 10px; margin-bottom: 10px; }
        .api-match:last-child { margin-bottom: 0; }
        .match-title { font-weight: 600; color: #333; margin-bottom: 5px; }
        .match-author { color: #666; margin-bottom: 5px; }
        .match-details { font-size: 0.9em; color: #888; }
        .no-matches { text-align: center; padding: 20px; color: #999; font-style: italic; }
        .api-no-results { }
        .search-details { background: #f8f9fa; border-radius: 6px; padding: 15px; margin-top: 15px; }
        .search-details h4 { margin-top: 0; color: #495057; }
        .search-details ul { margin: 10px 0; padding-left: 20px; }
        .search-details li { margin-bottom: 5px; color: #6c757d; }
        .search-details em { color: #6c757d; }
        .authority-result { display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 0.85em; margin-right: 10px; }
        .authority-valid { background: #d4edda; color: #155724; }
        .authority-invalid { background: #f8d7da; color: #721c24; }
        
        /* JSON Tree View */
        .json-tree-section { background: white; border-radius: 10px; padding: 20px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .json-tree-section h2 { margin-top: 0; color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-weight: 600; }
        .tree-container { border: 1px solid #e0e0e0; border-radius: 8px; padding: 15px; background: #fafafa; max-height: 600px; overflow-y: auto; font-family: "SF Mono", "Monaco", "Inconsolata", "Roboto Mono", monospace; }
        .expand-all-btn, .collapse-all-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 8px 16px; border-radius: 20px; cursor: pointer; margin-right: 10px; margin-bottom: 15px; font-size: 0.9em; transition: transform 0.2s ease; }
        .expand-all-btn:hover, .collapse-all-btn:hover { transform: translateY(-1px); }
        
        /* Footer */
        .footer { text-align: center; padding: 20px; color: #666; font-size: 0.9em; background: white; border-radius: 10px; margin-top: 30px; }
        .footer a { color: #667eea; text-decoration: none; font-weight: 500; }
        .footer a:hover { text-decoration: underline; }
        
        /* Responsive */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .thumbnail { width: 150px; height: 225px; }
            .thumbnail-label { max-width: 150px; }
            .modal-nav { display: none; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>JP-test-1</h1>
        <p>üìö MARC Records generated by marcsnarc on 2025-12-23 13:32:36</p>
    </div>
    
    <div class='image-gallery'>

                <div class='thumbnail-container' onclick='openModal(0)'>
                    <img src='img_PXL_20251212_165802824.webp' alt='PXL_20251212_165802824.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165802824.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(1)'>
                    <img src='img_PXL_20251212_165807773.webp' alt='PXL_20251212_165807773.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165807773.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(2)'>
                    <img src='img_PXL_20251212_165816342.webp' alt='PXL_20251212_165816342.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165816342.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(3)'>
                    <img src='img_PXL_20251212_165825246.webp' alt='PXL_20251212_165825246.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165825246.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(4)'>
                    <img src='img_PXL_20251212_165855357.webp' alt='PXL_20251212_165855357.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165855357.jpg</div>
                </div>
                
                <div class='thumbnail-container' onclick='openModal(5)'>
                    <img src='img_PXL_20251212_165928834.webp' alt='PXL_20251212_165928834.jpg' class='thumbnail' loading='lazy'>
                    <div class='thumbnail-label'>PXL_20251212_165928834.jpg</div>
                </div>
                </div>

    
    <!-- Modal for image viewing -->
    <div id="imageModal" class="modal">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <button class="modal-nav modal-prev" onclick="changeImage(-1)">‚Äπ</button>
        <button class="modal-nav modal-next" onclick="changeImage(1)">‚Ä∫</button>
        <div class="modal-content">
            <img id="modalImage" class="modal-image" src="" alt="">
        </div>
        <div class="modal-counter" id="modalCounter"></div>
    </div>
    
    <div class="records-section">
        <h2>üìã MARC Records</h2>
        <div class='marc-record'>
<h3>Record 1</h3>
<div class='confidence'>Confidence: 0.47</div>
<div class='review-flag'>‚ö†Ô∏è Review Required</div>
<table><tr><th>LDR</th><td>00000nam a200000 Ki 500</td></tr><tr><th>001</th><td>msn20251223193235</td></tr><tr><th>003</th><td>DLC</td></tr><tr><th>005</th><td>20251223193235.0</td></tr><tr><th>008</th><td>251223m19372019            o     00jpn und d</td></tr><tr><th>040</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>DLC <span class="subfield-code">‚Ä°b</span>eng <span class="subfield-code">‚Ä°c</span>DLC <span class="subfield-code">‚Ä°e</span>rda </td></tr><tr><th>245</th><td><strong>00</strong> <span class="subfield-code">‚Ä°a</span>JP-test-1 </td></tr><tr><th>264</th><td><strong>_1</strong> <span class="subfield-code">‚Ä°c</span>1937 </td></tr><tr><th>300</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>6 items (various formats) </td></tr><tr><th>520</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Collection consists of 2 books, 4 other items. Items date from 1937 to 2019. </td></tr><tr><th>500</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Collection-level record for 6 items </td></tr><tr><th>500</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Provenance: Extracted from 6 images using marcsnarc </td></tr><tr><th>561</th><td><strong>__</strong> <span class="subfield-code">‚Ä°a</span>Extracted from 6 images using marcsnarc </td></tr><tr><th>650</th><td><strong>_0</strong> <span class="subfield-code">‚Ä°a</span>Sino-Japanese War </td></tr><tr><th>999</th><td><strong>__</strong> <span class="subfield-code">‚Ä°i</span>Generated by marcsnarc on 2025-12-23 <span class="subfield-code">‚Ä°s</span>marcsnarc </td></tr></table></div>

    </div>
    
    <div class="api-results-section">
<h2>üåê External API Results</h2>
<div class="api-summary">
<p><strong>Search Summary:</strong> 2 item(s) searched across WorldCat, Library of Congress, and Alma catalogs</p>
</div>
<div class="api-no-results">
<div class="no-matches">External catalog searches were performed but no matches were found.</div>
<div class="search-details">
<p><strong>Search Status by Service:</strong></p>
<ul>
<li><strong>üìö WorldCat:</strong> Search attempted - likely failed due to server issues or no matches</li>
<li><strong>üèõÔ∏è Library of Congress:</strong> Authority validation performed</li>
<li><strong>üéì Alma Catalog:</strong> Local catalog searched</li>
</ul>
<p><em>Check the processing logs for detailed error messages.</em></p>
</div>
</div>
</div>

    
    
            <div class='json-tree-section'>
                <h2>üìä Analysis Data</h2>
                <div class='tree-container' id='analysis-tree'></div>
                <button class='expand-all-btn' onclick='expandAllNodes("analysis-tree")'>
                    üîç Expand All
                </button>
                <button class='collapse-all-btn' onclick='collapseAllNodes("analysis-tree")'>
                    üìÅ Collapse All
                </button>
            </div>
            
            <div class='json-tree-section'>
                <h2>üìã Processing Metadata</h2>
                <div class='tree-container' id='metadata-tree'></div>
                <button class='expand-all-btn' onclick='expandAllNodes("metadata-tree")'>
                    üîç Expand All
                </button>
                <button class='collapse-all-btn' onclick='collapseAllNodes("metadata-tree")'>
                    üìÅ Collapse All
                </button>
            </div>
            
    
    <div class="footer">
        Generated with <a href="https://github.com/anthropics/marcsnarc">marcsnarc</a> - AI-powered MARC cataloging
    </div>
    
    <script>
        // Global variables for modal and JSON data
        let currentImages = [];
        let currentImageIndex = 0;
        const analysisData = {"collection_analysis": {"item_count": 6, "formats": {"format_counts": {"book": 1, "pamphlet": 1, "note": 1, "periodical/photograph magazine": 1, "bibliography page": 1, "magazine": 1}, "unique_formats": "{'pamphlet', 'note', 'magazine', 'book', 'periodical/photograph magazine', 'bibliography page'}", "books": 2, "serials": 0, "ephemera": 0, "other": 4, "primary_format": "book"}, "creators": {"creator_counts": {"ÊÅ©‰∫ïÂçäËîµ": 1, "ÊúùÊó•Êñ∞ËÅûÁ§æ": 1, "Multiple authors referenced in bibliography": 1, "Not clearly specified - appears to be Tokyo nichi nichi shinbunsha (Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ)": 1}, "unique_creators": "{'ÊÅ©‰∫ïÂçäËîµ', 'Not clearly specified - appears to be Tokyo nichi nichi shinbunsha (Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ)', 'Multiple authors referenced in bibliography', 'ÊúùÊó•Êñ∞ËÅûÁ§æ'}", "items_with_creators": 4, "items_without_creators": 2, "dominant_creator": ["ÊÅ©‰∫ïÂçäËîµ", 1]}, "dates": {"date_range": [1937, 2019], "earliest_date": 1937, "latest_date": 2019, "date_span": 82, "items_with_dates": 3, "date_counts": {"1937": 1, "1941": 1, "2019": 1}}, "languages": {"language_counts": {"english, japanese, chinese": 1, "jpn": 2, "eng": 1, "english with japanese and chinese text": 1, "japanese and english": 1}, "unique_languages": "{'english, japanese, chinese', 'english with japanese and chinese text', 'eng', 'jpn', 'japanese and english'}", "primary_language": "jpn", "multilingual": true}, "subjects": {"subject_counts": {"War coverage": 1, "China-Japan relations": 1, "Military history": 1, "Photography": 1, "Japanese magazines": 1, "Sino-Japanese War": 2, "Manchuria": 1, "Geography": 1, "Japan-Manchuria relations": 1, "Historical geography": 1, "Room labels": 1, "Household organization": 1, "North China Incident": 1, "Military photography": 1, "War reportage": 1, "Japanese military history": 1, "Osaka": 1, "Japanese history": 1, "Chinese national government": 1, "Japanese puppet regime": 1, "Burma": 1, "East Asia": 1, "World War II": 1, "Japanese ambassador": 1, "Cover operations": 1, "Japan's war in greater East Asia": 1, "World War II news coverage": 1, "Japanese wartime periodicals": 1, "Illustrated magazines": 1, "Admiral Soemu Toyoda": 1, "Combined Fleet": 1, "Burma front": 1, "Admiral Mineichi Koga": 1}, "unique_subjects": "{'World War II', 'Japan-Manchuria relations', 'Japanese military history', 'Military history', 'Burma front', 'Household organization', 'Japanese wartime periodicals', 'Cover operations', 'Manchuria', 'East Asia', 'Military photography', 'Osaka', 'Chinese national government', 'World War II news coverage', 'Japanese puppet regime', 'War coverage', 'Burma', 'China-Japan relations', 'North China Incident', 'Combined Fleet', 'Sino-Japanese War', 'War reportage', 'Illustrated magazines', 'Room labels', 'Japanese history', 'Japanese magazines', \"Japan's war in greater East Asia\", 'Historical geography', 'Japanese ambassador', 'Admiral Soemu Toyoda', 'Admiral Mineichi Koga', 'Photography', 'Geography'}", "items_with_subjects": 6, "common_subjects": [["Sino-Japanese War", 2], ["War coverage", 1], ["China-Japan relations", 1], ["Military history", 1], ["Photography", 1]], "subject_coherence": 2.8484848484848486}, "provenance": {"collection_provenance": "Extracted from 6 images using marcsnarc", "item_provenances": {}, "consistency_score": 1.0, "has_provenance": true}, "identifiers": {"items_with_isbn": 0, "items_with_issn": 0, "items_with_oclc": 0, "items_with_lccn": 0, "identifier_coverage": 0.0}, "physical_characteristics": {"extent_variety": 5, "dimension_variety": 5, "physical_coherence": 0.16666666666666663}, "format_diversity": 6, "creator_diversity": 4, "has_books_serials": true, "shared_provenance": true, "temporal_coherence": 0.2, "workflow_type": "collection_images_to_marc", "collection_name": "JP-test-1", "processing_timestamp": "2025-12-23T13:32:35.347325", "total_records": 1, "approach": "collection"}, "batch_analysis": {"collection_name": "JP-test-1", "total_images": 6, "successful_analyses": 6, "failed_analyses": 0, "individual_results": [{"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165807773.jpg", "extracted_data": {"title": "The Shina jihon Goh≈ç", "subtitle": "A large format box photo-illustrated magazine devoted to the war in China", "publication_place": "China, Japan", "publication_date": "early 2000s", "normalized_date": {"normalized": null, "end_date": null, "circa": false, "uncertain": true, "original": "early 2000s"}, "format": "book", "language": "english, japanese, chinese", "original_script_title": "Mixed: Latin alphabet, Chinese characters, Japanese characters", "subjects": [{"heading": "War coverage", "type": "topical", "source": "claude_analysis"}, {"heading": "China-Japan relations", "type": "topical", "source": "claude_analysis"}, {"heading": "Military history", "type": "topical", "source": "claude_analysis"}, {"heading": "Photography", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese magazines", "type": "topical", "source": "claude_analysis"}, {"heading": "Sino-Japanese War", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Document appears to be a bibliographic catalog entry or reference list", "source": "image_analysis"}, {"text": "Contains multiple entries about 'Showa' publications dated from 1937-1939", "source": "image_analysis"}, {"text": "References include soldiers in trenches, periscopes, and war-related imagery", "source": "image_analysis"}, {"text": "Multiple cover descriptions for issues numbered 1-70", "source": "image_analysis"}, {"text": "Mentions Japanese soldiers wearing gas masks, campaigns, and military activities", "source": "image_analysis"}, {"text": "Contains romanized Japanese text alongside English descriptions", "source": "image_analysis"}, {"text": "References to Chinese collaborators, civilian leaders", "source": "image_analysis"}, {"text": "Includes specific dates and issue numbers", "source": "image_analysis"}, {"text": "Text describes magazine contents and cover subjects", "source": "image_analysis"}, {"text": "References eBay purchase in early 2000s", "source": "image_analysis"}, {"text": "Mentions $75 per issue pricing", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.765, "creator": 0.2, "publication": 0.39, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.48425}, "overall_confidence": 0.48425, "claude_factors": {"text_clarity": "high", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "≈åsaka mai nichi, T≈çky≈ç nichi nichi", "language": "Japanese (romanized)", "location": "upper left"}, {"text": "ÊîØÈÇ£‰∫ãÂ§âÁîªÂ†± Shina jihen gah≈ç", "language": "Japanese (mixed script)", "location": "title area"}, {"text": "Â§ßÈò™ÊØéÊó• ≈åsaka mai nichi Shinbun sha", "language": "Japanese (mixed script)", "location": "publisher area"}, {"text": "The Shina jihon Goh≈ç is a large format box photo-illustrated magazine devoted to the war in China...", "language": "English", "location": "main body text"}, {"text": "Showa 12, August 3rd, no. 1: Cover: Soldiers in the trench, using a periscope.", "language": "English", "location": "entry list"}, {"text": "Showa 13, February 11, no. 18: Cover: Policeman directing traffic at an intersection in the snow.", "language": "English", "location": "entry list"}, {"text": "Showa 14, March 5, no. 54: Cover: Two men saw a log into planks.", "language": "English", "location": "entry list"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided", "No creator/author information found"], "review_required": true, "sequence_number": 1}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165928834.jpg", "extracted_data": {"title": "Ê∫ÄÊ¥≤Âú∞ÁêÜ", "creator": {"name": "ÊÅ©‰∫ïÂçäËîµ", "type": "personal", "source": "claude_analysis", "romanization": "Onoi Hanz≈ç"}, "format": "pamphlet", "extent": "Single sheet, printed on one side", "dimensions": "Approximately A4 or similar size", "language": "jpn", "original_script_title": "Japanese (Kanji and Kana)", "subjects": [{"heading": "Manchuria", "type": "topical", "source": "claude_analysis"}, {"heading": "Geography", "type": "topical", "source": "claude_analysis"}, {"heading": "Japan-Manchuria relations", "type": "topical", "source": "claude_analysis"}, {"heading": "Historical geography", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Document appears to be a historical Japanese publication about Manchurian geography", "source": "image_analysis"}, {"text": "Contains photographic images showing urban scenes and architecture", "source": "image_analysis"}, {"text": "Text is printed vertically in traditional Japanese style", "source": "image_analysis"}, {"text": "Shows signs of age with some discoloration and wear", "source": "image_analysis"}, {"text": "Header contains additional text in smaller characters", "source": "image_analysis"}, {"text": "Images appear to show colonial-era Manchuria with buildings and street scenes", "source": "image_analysis"}, {"text": "The publication appears to be educational or informational in nature", "source": "image_analysis"}, {"text": "Text at top margin contains publication or catalog information", "source": "image_analysis"}, {"text": "Document is photographed laying flat on wooden surface", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.0, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.4365}, "overall_confidence": 0.4365, "claude_factors": {"text_clarity": "medium", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "Ê∫ÄÊ¥≤Âú∞ÁêÜ", "language": "Japanese", "location": "title"}, {"text": "ÊÅ©‰∫ïÂçäËîµ", "language": "Japanese", "location": "attribution/author line"}, {"text": "Ê∫ÄÊ¥≤„ÅÆËàûË∏ä„ÅÆÂïèÈ°å\nÊ∫ÄÊ¥≤„ÅÆËàûË∏ä„ÅÆÁµÑÁπî", "language": "Japanese", "location": "subtitle or section headers"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 2}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165802824.jpg", "extracted_data": {"title": "Bedroom 1", "format": "note", "extent": "1 adhesive note", "dimensions": "Approximately 3x3 inches (standard sticky note size)", "language": "eng", "original_script_title": "Latin", "subjects": [{"heading": "Room labels", "type": "topical", "source": "claude_analysis"}, {"heading": "Household organization", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Handwritten text in blue ink on light blue adhesive note", "source": "image_analysis"}, {"text": "Text appears to be written vertically along the left side", "source": "image_analysis"}, {"text": "Simple label or organizational marker, likely for identifying a room", "source": "image_analysis"}, {"text": "Not a formal bibliographic item - appears to be ephemera or personal note", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.765, "creator": 0.2, "publication": 0.0, "format": 0.5850000000000001, "language": 0.5850000000000001, "overall": 0.42575}, "overall_confidence": 0.42575, "claude_factors": {"text_clarity": "high", "completeness": "high", "language_certainty": "high"}, "original_text_regions": [{"text": "Bedroom 1", "language": "English", "location": "center of note, written vertically"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided", "No creator/author information found"], "review_required": true, "sequence_number": 3}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165855357.jpg", "extracted_data": {"title": "ÂåóÊîØ‰∫ãÂ§âÁîªÂ†±", "creator": {"name": "ÊúùÊó•Êñ∞ËÅûÁ§æ", "type": "corporate", "source": "claude_analysis", "romanization": "Asahi Shinbunsha"}, "publisher": "ÊúùÊó•Êñ∞ËÅûÁ§æ (Asahi Shimbunsha)", "publication_place": "Japan (likely Tokyo or Osaka)", "publication_date": "Êò≠ÂíåÂçÅ‰∫åÂπ¥ (Showa 12, 1937)", "normalized_date": {"normalized": "1937", "end_date": null, "circa": false, "uncertain": false, "original": "Êò≠ÂíåÂçÅ‰∫åÂπ¥ (Showa 12, 1937)"}, "format": "periodical/photograph magazine", "extent": "Single issue", "dimensions": "Approximately A4 or similar magazine format", "language": "jpn", "original_script_title": "Chinese characters (Kanji)", "other_identifiers": "Á¨¨‰∫åËºØ (Volume/Issue 2)", "subjects": [{"heading": "North China Incident", "type": "topical", "source": "claude_analysis"}, {"heading": "Sino-Japanese War", "type": "topical", "source": "claude_analysis"}, {"heading": "Military photography", "type": "topical", "source": "claude_analysis"}, {"heading": "War reportage", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese military history", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "Historical Japanese military pictorial magazine", "source": "image_analysis"}, {"text": "Features photograph of Japanese soldiers in combat position with helmets and rifles", "source": "image_analysis"}, {"text": "Magazine cover shows soldiers from behind looking toward vegetation", "source": "image_analysis"}, {"text": "Publication relates to the North China Incident (1937-1938), part of the Second Sino-Japanese War", "source": "image_analysis"}, {"text": "Shows signs of aging with some foxing and edge wear", "source": "image_analysis"}, {"text": "Published during early Showa period wartime", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.45499999999999996, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.5275}, "overall_confidence": 0.5275, "claude_factors": {"text_clarity": "medium", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "ÂåóÊîØ‰∫ãÂ§âÁîªÂ†±", "language": "Japanese", "location": "cover header"}, {"text": "Êò≠ÂíåÂçÅ‰∫åÂπ¥ Á¨¨‰∫åËºØ", "language": "Japanese", "location": "cover left side"}, {"text": "ÊúùÊó•Êñ∞ËÅûÁ§æ", "language": "Japanese", "location": "cover - publisher information"}], "processing_notes": ["Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 4}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165816342.jpg", "extracted_data": {"title": "Bibliography entries regarding Osaka and Japanese culture", "creator": {"name": "Multiple authors referenced in bibliography", "type": "personal", "source": "claude_analysis", "romanization": "Various"}, "publication_date": "References span 1941-2006", "normalized_date": {"normalized": "1941", "end_date": "2006", "circa": false, "uncertain": false, "original": "References span 1941-2006"}, "format": "bibliography page", "extent": "Single page from a larger work", "dimensions": "Standard letter size (approximately 8.5 x 11 inches)", "language": "english with japanese and chinese text", "original_script_title": "Latin, Japanese (kanji/kana), Chinese characters", "subjects": [{"heading": "Osaka", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese history", "type": "topical", "source": "claude_analysis"}, {"heading": "Chinese national government", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese puppet regime", "type": "topical", "source": "claude_analysis"}, {"heading": "Burma", "type": "topical", "source": "claude_analysis"}, {"heading": "East Asia", "type": "topical", "source": "claude_analysis"}, {"heading": "World War II", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese ambassador", "type": "topical", "source": "claude_analysis"}, {"heading": "Cover operations", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "This appears to be a bibliography or reference page from an academic work", "source": "image_analysis"}, {"text": "Contains multiple entries with bilingual Japanese-English titles", "source": "image_analysis"}, {"text": "References include works from Showa period (1941, 1948, 1964, 1991)", "source": "image_analysis"}, {"text": "Entries numbered sequentially (Shows 14, 15, entries visible)", "source": "image_analysis"}, {"text": "Some entries contain romanized Japanese (e.g., 'Dai toa senso hishi')", "source": "image_analysis"}, {"text": "References discuss topics including Osaka city, Chinese government under Wang Jingwei, Japanese military operations", "source": "image_analysis"}, {"text": "Multiple publishers mentioned including Showa (Êò≠Âíå), various Japanese publishers", "source": "image_analysis"}, {"text": "Some entries reference locations like Tokyo, China, Burma, Solomon Islands, New Guinea", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.595, "creator": 0.5249999999999999, "publication": 0.15166666666666667, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.4668333333333333}, "overall_confidence": 0.4668333333333333, "claude_factors": {"text_clarity": "medium", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "Showa 14, August 15, no. 64, Anglo-Japanese talks in Tokyo: Cover if hierarchies, pp. of behind a palm tree", "language": "English", "location": "bibliography entry"}, {"text": "Showa 15, April 5, no. 80. Special issue on the formation of a new Chinese national government under Wang Jingwei in Nanjing. Cover: celebratory arch in Shanghai.", "language": "English", "location": "bibliography entry"}, {"text": "Dai toa senso hishi / Â§ßÊù±‰∫úÊà¶‰∫âÁßòÂè≤ [Traces: The Greater East Asia War]", "language": "Japanese and English", "location": "bibliography entry"}, {"text": "Osaka Â§ßÈò™Â∏Ç [Osaka mainichi]", "language": "Japanese and English", "location": "bibliography entry"}, {"text": "Dai toa senso hishi / Â§ßÊù±‰∫úÊà¶‰∫âÁßòÂè≤ [Trans: The Greater / O-ka mainichi / Osaka mainichi]", "language": "Mixed Japanese-English", "location": "bibliography entry"}], "processing_notes": ["Overall confidence is low - manual review recommended", "Title extraction has low confidence", "Creator/author extraction has low confidence", "Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 5}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165825246.jpg", "extracted_data": {"title": "T≈çky≈ç nichi nichi shinbunsha sekishiki shinbunshi Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ: A large format monthly illustrated magazine devoted to the news of Japan's war in greater East Asia", "creator": {"name": "Not clearly specified - appears to be Tokyo nichi nichi shinbunsha (Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ)", "type": "corporate", "source": "claude_analysis", "romanization": "Tokyo nichi nichi shinbunsha"}, "publisher": "Not specified on this page", "publication_place": "Not visible on this page", "publication_date": "early 2000s (cataloged July 2019)", "normalized_date": {"normalized": "2019", "end_date": null, "circa": true, "uncertain": false, "original": "early 2000s (cataloged July 2019)"}, "format": "magazine", "extent": "Not specified on this page", "dimensions": "large format", "language": "japanese and english", "original_script_title": "Japanese (kanji/kana) and Latin alphabet", "other_identifiers": "Total issues held: 19. Cataloged July, 2019.", "subjects": [{"heading": "Japan's war in greater East Asia", "type": "topical", "source": "claude_analysis"}, {"heading": "World War II news coverage", "type": "topical", "source": "claude_analysis"}, {"heading": "Japanese wartime periodicals", "type": "topical", "source": "claude_analysis"}, {"heading": "Illustrated magazines", "type": "topical", "source": "claude_analysis"}, {"heading": "Admiral Soemu Toyoda", "type": "topical", "source": "claude_analysis"}, {"heading": "Combined Fleet", "type": "topical", "source": "claude_analysis"}, {"heading": "Burma front", "type": "topical", "source": "claude_analysis"}, {"heading": "Admiral Mineichi Koga", "type": "topical", "source": "claude_analysis"}], "notes": [{"text": "This appears to be a cataloging note or description page rather than the actual publication", "source": "image_analysis"}, {"text": "Text includes both Japanese characters (Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ) and English transliteration/description", "source": "image_analysis"}, {"text": "Mentions rear covers feature advertisements and contents pages", "source": "image_analysis"}, {"text": "Refers to photographs being of Combined Fleet, standing on bridge, India Burma front, Admiral Soemu Toyoda, commander of the Combined Fleet, and Death of Admiral Mineichi Koga", "source": "image_analysis"}, {"text": "Four small holes are mentioned as being purchased along edge from Utagawa123 via Ebay in the early 2000s", "source": "image_analysis"}, {"text": "Page appears to be rotated 90 degrees (vertical text running horizontally)", "source": "image_analysis"}], "extraction_source": "claude_vision", "title_source": "claude_analysis", "creator_source": "claude_analysis", "publication_source": "claude_analysis"}, "confidence_scores": {"title": 0.765, "creator": 0.675, "publication": 0.5850000000000001, "format": 0.45499999999999996, "language": 0.5850000000000001, "overall": 0.642}, "overall_confidence": 0.642, "claude_factors": {"text_clarity": "high", "completeness": "medium", "language_certainty": "high"}, "original_text_regions": [{"text": "Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ", "language": "Japanese", "location": "cataloging description"}, {"text": "T≈çky≈ç nichi nichi shinbunsha sekishiki shinbunshi Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ: A large format monthly illustrated magazine devoted to the news of Japan's war in greater East Asia. Includes a day by day summary of the month's news. Photographs are u&w only. Rear covers are advertisements. Contents: front cover: Admiral Soemu Toyoda, commander of the Combined Fleet, standing on the bridge, India Burma front. Scenes in Bougainville. Death of Admiral Mineichi Koga, commander of the combined fleet. Loyang. Condition: Excellent. Disbound, with four small holes punctched along edge, purchased from Utagawa123 via Ebay in the early 2000s.", "language": "English (with Japanese characters)", "location": "cataloging description page"}, {"text": "Total issues held: 19. Cataloged July, 2019.", "language": "English", "location": "cataloging note at bottom"}], "processing_notes": ["Contains CJK characters - romanization provided"], "review_required": true, "sequence_number": 6}], "collection_analysis": {"total_items": 6, "successful_extractions": 6, "common_characteristics": {"primary_language": "jpn", "language_distribution": {"english, japanese, chinese": 1, "jpn": 2, "eng": 1, "english with japanese and chinese text": 1, "japanese and english": 1}, "primary_format": "book", "format_distribution": {"book": 1, "pamphlet": 1, "note": 1, "periodical/photograph magazine": 1, "bibliography page": 1, "magazine": 1}, "publishers": {"ÊúùÊó•Êñ∞ËÅûÁ§æ (Asahi Shimbunsha)": 1, "Not specified on this page": 1}}, "quality_assessment": {"average_confidence": 0.49713888888888885, "high_confidence_items": 0, "low_confidence_items": 4, "confidence_range": [0.42575, 0.642]}, "recommendations": ["More than 30% of items have low confidence - consider manual review", "Multiple languages detected - verify language coding", "6 items contain CJK characters - verify romanization"]}, "batch_confidence": 0.49713888888888885, "processing_timestamp": "2025-12-23T13:32:35.223571"}, "individual_extractions": [{"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165807773.jpg", "extraction_confidence": 0.48425, "extracted_fields": ["title", "subtitle", "publication_place", "publication_date", "normalized_date", "format", "language", "original_script_title", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165928834.jpg", "extraction_confidence": 0.4365, "extracted_fields": ["title", "creator", "format", "extent", "dimensions", "language", "original_script_title", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165802824.jpg", "extraction_confidence": 0.42575, "extracted_fields": ["title", "format", "extent", "dimensions", "language", "original_script_title", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165855357.jpg", "extraction_confidence": 0.5275, "extracted_fields": ["title", "creator", "publisher", "publication_place", "publication_date", "normalized_date", "format", "extent", "dimensions", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165816342.jpg", "extraction_confidence": 0.4668333333333333, "extracted_fields": ["title", "creator", "publication_date", "normalized_date", "format", "extent", "dimensions", "language", "original_script_title", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}, {"image_path": "examples/Japanese Prints in OCLC/PXL_20251212_165825246.jpg", "extraction_confidence": 0.642, "extracted_fields": ["title", "creator", "publisher", "publication_place", "publication_date", "normalized_date", "format", "extent", "dimensions", "language", "original_script_title", "other_identifiers", "subjects", "notes", "extraction_source", "title_source", "creator_source", "publication_source", "source_image", "extraction_confidence", "sequence_number"]}], "external_api_results": [{"worldcat": [], "loc": [], "alma": [], "best_match": null}]};
        const metadataData = {"workflow_type": "collection_images_to_marc", "collection_name": "JP-test-1", "processing_result": {"approach": "collection", "records_generated": 1, "review_required": true, "groupings": {"approach": "collection", "total_items": 6, "groups": [{"type": "collection", "items": ["The Shina jihon Goh≈ç", "Ê∫ÄÊ¥≤Âú∞ÁêÜ", "Bedroom 1", "ÂåóÊîØ‰∫ãÂ§âÁîªÂ†±", "Bibliography entries regarding Osaka and Japanese culture", "T≈çky≈ç nichi nichi shinbunsha sekishiki shinbunshi Êù±‰∫¨Êó•Êó•Êñ∞ËÅûÁ§æ: A large format monthly illustrated magazine devoted to the news of Japan's war in greater East Asia"], "record_type": "collection"}]}}, "collection_data": {"total_items": 6, "source_images": ["examples/Japanese Prints in OCLC/PXL_20251212_165807773.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165928834.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165802824.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165855357.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165816342.jpg", "examples/Japanese Prints in OCLC/PXL_20251212_165825246.jpg"], "provenance": "Extracted from 6 images using marcsnarc"}, "batch_analysis_summary": {"total_images": 6, "successful_analyses": 6, "batch_confidence": 0.49713888888888885}, "processing_timestamp": "2025-12-23T13:32:35.347338"};
        
        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize images array from gallery
            const thumbnails = document.querySelectorAll('.thumbnail');
            currentImages = Array.from(thumbnails).map(img => ({
                src: img.src,
                alt: img.alt
            }));
            
            // Initialize JSON trees
            if (analysisData && Object.keys(analysisData).length > 0) {
                renderJsonTree('analysis-tree', analysisData);
            }
            if (metadataData && Object.keys(metadataData).length > 0) {
                renderJsonTree('metadata-tree', metadataData);
            }
        });
        
        // Modal functions
        function openModal(index) {
            currentImageIndex = index;
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            const counter = document.getElementById('modalCounter');
            
            if (currentImages[index]) {
                modalImage.src = currentImages[index].src;
                modalImage.alt = currentImages[index].alt;
                counter.textContent = `${index + 1} of ${currentImages.length}`;
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function changeImage(direction) {
            currentImageIndex = (currentImageIndex + direction + currentImages.length) % currentImages.length;
            openModal(currentImageIndex);
        }
        
        // Keyboard controls
        document.addEventListener('keydown', function(e) {
            const modal = document.getElementById('imageModal');
            if (modal.style.display === 'block') {
                if (e.key === 'Escape') closeModal();
                if (e.key === 'ArrowLeft') changeImage(-1);
                if (e.key === 'ArrowRight') changeImage(1);
            }
        });
        
        // Close modal on background click
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });
        
        // JSON Tree rendering functions
        function renderJsonTree(containerId, data) {
            const container = document.getElementById(containerId);
            if (!container || !data) return;
            
            container.innerHTML = '';
            const tree = createTreeElement(data, '', 0);
            container.appendChild(tree);
        }
        
        function createTreeElement(value, key, level) {
            const wrapper = document.createElement('div');
            wrapper.style.marginLeft = `${level * 20}px`;
            wrapper.style.marginBottom = '3px';
            
            if (value && typeof value === 'object' && !Array.isArray(value)) {
                // Object
                const keyElement = document.createElement('div');
                keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìÅ ${key} {${Object.keys(value).length}}</span>`;
                keyElement.style.userSelect = 'none';
                
                const children = document.createElement('div');
                children.style.display = 'none';
                children.style.borderLeft = '2px solid #e2e8f0';
                children.style.marginLeft = '15px';
                children.style.paddingLeft = '10px';
                
                Object.entries(value).forEach(([childKey, childValue]) => {
                    children.appendChild(createTreeElement(childValue, childKey, 0));
                });
                
                keyElement.addEventListener('click', function() {
                    const isExpanded = children.style.display !== 'none';
                    if (isExpanded) {
                        children.style.display = 'none';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìÅ ${key} {${Object.keys(value).length}}</span>`;
                    } else {
                        children.style.display = 'block';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñº üìÇ ${key} {${Object.keys(value).length}}</span>`;
                    }
                });
                
                wrapper.appendChild(keyElement);
                wrapper.appendChild(children);
            } else if (Array.isArray(value)) {
                // Array
                const keyElement = document.createElement('div');
                keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìö ${key} [${value.length}]</span>`;
                keyElement.style.userSelect = 'none';
                
                const children = document.createElement('div');
                children.style.display = 'none';
                children.style.borderLeft = '2px solid #e2e8f0';
                children.style.marginLeft = '15px';
                children.style.paddingLeft = '10px';
                
                value.forEach((item, index) => {
                    children.appendChild(createTreeElement(item, `[${index}]`, 0));
                });
                
                keyElement.addEventListener('click', function() {
                    const isExpanded = children.style.display !== 'none';
                    if (isExpanded) {
                        children.style.display = 'none';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñ∂ üìö ${key} [${value.length}]</span>`;
                    } else {
                        children.style.display = 'block';
                        keyElement.innerHTML = `<span style="cursor: pointer; color: #2d3748; font-weight: 600;">‚ñº üìñ ${key} [${value.length}]</span>`;
                    }
                });
                
                wrapper.appendChild(keyElement);
                wrapper.appendChild(children);
            } else {
                // Primitive value
                const element = document.createElement('div');
                const valueStr = value === null ? 'null' : String(value);
                const valueType = typeof value;
                let color = '#4a5568';
                let icon = 'üìÑ';
                
                if (valueType === 'string') { color = '#38a169'; icon = 'üìù'; }
                else if (valueType === 'number') { color = '#d69e2e'; icon = 'üî¢'; }
                else if (valueType === 'boolean') { color = '#9f7aea'; icon = '‚úÖ'; }
                else if (value === null) { color = '#a0aec0'; icon = '‚ùå'; }
                
                element.innerHTML = `<span style="color: #2d3748; font-weight: 600;">${icon} ${key}:</span> <span style="color: ${color};">${valueType === 'string' ? '"' + valueStr + '"' : valueStr}</span>`;
                wrapper.appendChild(element);
            }
            
            return wrapper;
        }
        
        function expandAllNodes(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // Find all clickable tree nodes (divs containing spans with cursor: pointer)
            container.querySelectorAll('span[style*="cursor: pointer"]').forEach(span => {
                if (span.innerHTML.includes('‚ñ∂')) {
                    span.parentElement.click();
                }
            });
        }
        
        function collapseAllNodes(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // Find all clickable tree nodes (divs containing spans with cursor: pointer)
            container.querySelectorAll('span[style*="cursor: pointer"]').forEach(span => {
                if (span.innerHTML.includes('‚ñº')) {
                    span.parentElement.click();
                }
            });
        }
    </script>
</body>
</html>